# --- Configuración de Base de Datos  ---
# IMPORTANTE: Render proporciona DATABASE_URL automáticamente para PostgreSQL
# Si DATABASE_URL existe (producción en Render), se usa PostgreSQL
# Si no existe (desarrollo local), se usa MySQL

# Driver JDBC - Se configura automáticamente según la URL
spring.datasource.driver-class-name=${DB_DRIVER:com.mysql.cj.jdbc.Driver}

# URL de Conexión
# En Render: usa DATABASE_URL (PostgreSQL)
# En local: usa MySQL
spring.datasource.url=${DATABASE_URL:jdbc:mysql://localhost:3306/harmony_db?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true}

# Credenciales de la Base de Datos
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:root}

# DDL Auto: CREA Y ACTUALIZA TABLAS automáticamente
spring.jpa.hibernate.ddl-auto=update

# Dialecto de Hibernate - Se detecta automáticamente
spring.jpa.database-platform=${DB_DIALECT:org.hibernate.dialect.MySQLDialect}

# Muestra las consultas SQL en la consola -> Mantenido en FALSE
spring.jpa.show-sql=false

# Formatea las consultas SQL para mejor lectura -> Mantenido en FALSE
spring.jpa.properties.hibernate.format_sql=false

# Puerto del servidor - Render usa la variable PORT
server.port=${PORT:8080}


# --- Configuración de Seguridad y Correo  ---
# Configuración de Correo
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=harmonyescuela06@gmail.com
spring.mail.password=yvnd dozt rvyj ziiq
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# Configuración JWT
application.security.jwt.secret-key=586E3272357538782F413F4428472B4B6250655368566B597033733676397924
application.security.jwt.expiration=86400000



# --- Configuración de Logging para SILENCIAR todo excepto mensajes críticos ---
# Nivel de log por defecto para toda la aplicación (Spring, Tomcat, etc.)
logging.level.root=ERROR 

# Permite que tus logs propios (com.harmony.sistema) sigan mostrando WARN y ERROR
logging.level.com.harmony.sistema=WARN

# Silencia logs de Hibernate y Spring Data, solo mostrando Errores
logging.level.org.hibernate=ERROR
logging.level.org.springframework.data=ERROR

# Nivel de log para consultas SQL de Hibernate -> Silenciado a ERROR (antes WARN)
logging.level.org.hibernate.SQL=ERROR
logging.level.org.hibernate.type.descriptor.sql=ERROR