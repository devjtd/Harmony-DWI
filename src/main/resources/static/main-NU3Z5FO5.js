import{a as n}from"./chunk-XOUSWKTL.js";import{$a as S,Ba as E,Ca as R,G as p,Pa as D,Qa as M,Ua as b,V as A,Va as y,W as h,X as v,Xa as T,Ya as N,f as l,i as d,ia as C,q as i,u as f,v as g}from"./chunk-M6627VFI.js";function x(e){let r=e,o=Math.floor(Math.abs(e)),a=e.toString().replace(/^[^.]*\.?/,"").length,s=parseInt(e.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return r===1?1:s===0&&o!==0&&o%1e6===0&&a===0||!(s>=0&&s<=5)?4:5}var I=["es",[["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",x];var c=class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=p({type:e,selectors:[["app-error404"]],decls:2,vars:0,template:function(o,a){o&1&&(h(0,"p"),C(1,"error404 works!"),v())},encapsulation:2})};var U=(e,r)=>{let o=i(n);return o.isAdmin()?(console.log("[ADMIN GUARD] Acceso permitido a ruta de admin"),!0):(console.warn("[ADMIN GUARD] Acceso denegado. Usuario no es admin. Redirigiendo seg\xFAn rol."),o.redirectByRole(),!1)};var P=(e,r)=>{let o=i(n);return o.isProfesor()?(console.log("[PROFESOR GUARD] Acceso permitido a ruta de profesor"),!0):(console.warn("[PROFESOR GUARD] Acceso denegado. Usuario no es profesor. Redirigiendo seg\xFAn rol."),o.redirectByRole(),!1)};var F=(e,r)=>{let o=i(n);return o.isCliente()?(console.log("[ESTUDIANTE GUARD] Acceso permitido a ruta de estudiante"),!0):(console.warn("[ESTUDIANTE GUARD] Acceso denegado. Usuario no es estudiante. Redirigiendo seg\xFAn rol."),o.redirectByRole(),!1)};var G=[{path:"auth",loadChildren:()=>import("./chunk-DKVE4PYY.js").then(e=>e.AuthRoutingModule)},{path:"",loadChildren:()=>import("./chunk-AS4LT6NQ.js").then(e=>e.LandingModule)},{path:"admin",canActivate:[U],loadChildren:()=>import("./chunk-F6SIX6BN.js").then(e=>e.AdminModule)},{path:"estudiante",canActivate:[F],loadChildren:()=>import("./chunk-DQEW2TK5.js").then(e=>e.EstudianteModule)},{path:"profesor",canActivate:[P],loadChildren:()=>import("./chunk-325NPZ2R.js").then(e=>e.ProfesorModule)},{path:"**",component:c,title:"Harmony - Error"}];var O=(e,r)=>{let o=i(n),a=i(N),s=o.getToken(),m=["/api/auth/login","/api/auth/register","/api/talleres/activos","/api/talleres/detallados/activos","/api/profesores","/api/inscripcion/talleresDisponibles","/api/inscripcion/cliente","/api/inscripcion/confirmar","/contacto/enviar","/api/blog"].some(t=>e.url.includes(t));if(s&&!m){console.log("[JWT INTERCEPTOR] Agregando token a la petici\xF3n:",e.url);let t=e.headers.set("Authorization",`Bearer ${s}`);e.body&&!(e.body instanceof FormData)&&(e.headers.has("Content-Type")||(t=t.set("Content-Type","application/json"))),e=e.clone({headers:t})}return r(e).pipe(d(t=>(t.status===401&&!m&&(console.error("[JWT INTERCEPTOR] Error 401 - Token inv\xE1lido o expirado"),console.error("[JWT INTERCEPTOR] Cerrando sesi\xF3n y redirigiendo a login"),o.logout(),a.navigate(["/auth/login"],{queryParams:{returnUrl:a.url}})),t.status===403&&(console.error("[JWT INTERCEPTOR] Error 403 - Sin permisos para esta acci\xF3n"),a.navigate(["/"])),l(()=>t))))};D(I);var j={providers:[f(),E({eventCoalescing:!0}),S(G),b(y([O])),{provide:R,useValue:"es"}]};var u=class e{title=g("HarmonyApp");static \u0275fac=function(o){return new(o||e)};static \u0275cmp=p({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,a){o&1&&A(0,"router-outlet")},dependencies:[T],encapsulation:2})};M(u,j).catch(e=>console.error(e));
