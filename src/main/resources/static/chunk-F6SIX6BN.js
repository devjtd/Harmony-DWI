import{a as ie,b as F,c as U,d as k,e as W,f as H,g as G,h as ve,i as B,j as z,k as q,l as xe,m as j,r as P}from"./chunk-XRDTVXG3.js";import{$ as x,B as l,F as O,G as M,H as $,Ja as N,K as _,Ka as V,N as ae,Oa as w,S as m,Sa as me,T as i,Ta as he,U as r,V as f,Xa as Ee,Z as ee,Za as _e,_ as te,_a as Se,a as R,aa as S,ab as X,ba as u,ca as le,da as se,ea as de,fa as A,ha as L,ia as a,ja as v,ka as C,la as ce,m as ue,n as Z,na as K,oa as be,pa as b,q as fe,qa as h,r as g,ra as E,s as p,ua as D,z as y}from"./chunk-M6627VFI.js";var Ce=()=>["/"],Ie=()=>["/admin/clientes"],Re=()=>["/admin/profesores"],Le=()=>["/admin/talleres"],re=class s{static \u0275fac=function(e){return new(e||s)};static \u0275cmp=M({type:s,selectors:[["app-layout"]],decls:22,vars:11,consts:[[1,"sidebar","d-flex","flex-column"],[1,"header-logo-dashboard"],[1,"d-flex","align-items-center","text-decoration-none","text-white",3,"routerLink"],["alt","Logo Harmony","width","40","height","40",1,"me-2",3,"src"],[1,"h5","mb-0","fw-bold"],[1,"nav","flex-column","flex-grow-1"],["routerLinkActive","active",1,"nav-link-item",3,"routerLink"],[1,"bi","bi-people","me-2"],[1,"bi","bi-person-badge","me-2"],[1,"bi","bi-music-note-list","me-2"],[1,"nav-link-item","nav-link-logout",3,"routerLink"],[1,"bi","bi-box-arrow-right","me-2"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"a",2),f(3,"img",3),i(4,"h1",4),a(5,"Harmony"),r()()(),i(6,"nav",5)(7,"a",6),f(8,"i",7),a(9," Clientes "),r(),i(10,"a",6),f(11,"i",8),a(12," Profesores "),r(),i(13,"a",6),f(14,"i",9),a(15," Talleres y Horarios "),r(),i(16,"div")(17,"a",10),f(18,"i",11),a(19," Cerrar Sesi\xF3n "),r()()()(),i(20,"main"),f(21,"router-outlet"),r()),e&2&&(l(2),m("routerLink",D(6,Ce)),l(),m("src","/logo.png",y),l(4),m("routerLink",D(7,Ie)),l(3),m("routerLink",D(8,Re)),l(3),m("routerLink",D(9,Le)),l(4),m("routerLink",D(10,Ce)))},dependencies:[X,Ee,_e,Se],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--dashboard-fondo-general: #f8f9fa;--sidebar-ancho: 250px;--sidebar-fondo: #343a40;--sidebar-texto: rgba(255, 255, 255, .8);--sidebar-hover-fondo: #495057;--sidebar-hover-texto: white;--sidebar-borde: 1px solid #495057;--logout-color: #dc3545;--contenido-fondo: white;--contenido-sombra: 0 4px 12px rgba(0, 0, 0, .1)}body[_ngcontent-%COMP%]{background-color:#f8f9fa}.sidebar[_ngcontent-%COMP%]{width:250px;height:100vh;position:fixed;top:0;left:0;padding-top:20px;background-color:#343a40;color:#fff;z-index:1000}.header-logo-dashboard[_ngcontent-%COMP%]{padding:0 20px 20px;border-bottom:1px solid #495057;margin-bottom:15px}.nav-link-item[_ngcontent-%COMP%]{color:#fffc;padding:15px 20px;text-decoration:none;display:block;transition:background-color .2s,color .2s}.nav-link-item[_ngcontent-%COMP%]:hover, .nav-link-item.active[_ngcontent-%COMP%]{background-color:#495057;color:#fff}.nav-link-logout[_ngcontent-%COMP%]{color:#dc3545}.nav-link-logout[_ngcontent-%COMP%]:hover{background-color:#495057;color:#dc3545}.main-content[_ngcontent-%COMP%]{margin-left:250px;padding:20px}.calendar-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 4px 12px #0000001a}.table-dark[_ngcontent-%COMP%]{--bs-table-bg: #212529;color:#fff}.password-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:30px;box-shadow:0 4px 12px #0000001a}.password-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:10px 15px;border-radius:6px}.btn-confirmar-password[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;font-weight:700;padding:10px 20px;transition:background-color .3s ease}.btn-confirmar-password[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.text-harmony-title[_ngcontent-%COMP%]{color:#5e3ea1!important;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.1)}.main-content[_ngcontent-%COMP%]   h1.text-harmony-title[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem!important}.main-content[_ngcontent-%COMP%]   h2.text-harmony-title[_ngcontent-%COMP%]{font-size:1.8rem;border-bottom:2px solid #724fd2;padding-bottom:5px}']})};var T="/api/admin",Te="/api/upload",I=class s{http=fe(he);getProfesores(){return console.log("\u{1F535} [ADMIN SERVICE] GET /api/admin/profesores"),this.http.get(`${T}/profesores`)}createProfesor(n){return console.log("\u{1F535} [ADMIN SERVICE] POST /api/admin/profesores",n),this.http.post(`${T}/profesores`,n)}updateProfesor(n,e){return console.log("\u{1F535} [ADMIN SERVICE] PUT /api/admin/profesores/"+n,e),this.http.put(`${T}/profesores/${n}`,e)}deleteProfesor(n){return console.log("\u{1F535} [ADMIN SERVICE] DELETE /api/admin/profesores/"+n),this.http.delete(`${T}/profesores/${n}`)}getTalleres(){return console.log("\u{1F535} [ADMIN SERVICE] GET /api/admin/talleres"),this.http.get(`${T}/talleres`)}getTalleresActivos(){return console.log("\u{1F535} [ADMIN SERVICE] GET /api/admin/talleres/activos"),this.http.get(`${T}/talleres/activos`)}getTalleresDisponibles(){return console.log("\u{1F535} [ADMIN SERVICE] GET /api/admin/clientes/talleres-disponibles"),this.http.get(`${T}/clientes/talleres-disponibles`)}createTaller(n){return console.log("\u{1F535} [ADMIN SERVICE] POST /api/admin/talleres",n),this.http.post(`${T}/talleres`,n)}updateTaller(n,e){return console.log("\u{1F535} [ADMIN SERVICE] PUT /api/admin/talleres/"+n,e),this.http.put(`${T}/talleres/${n}`,e)}deleteTaller(n){return console.log("\u{1F535} [ADMIN SERVICE] DELETE /api/admin/talleres/"+n),this.http.delete(`${T}/talleres/${n}`)}getClientes(){return console.log("\u{1F535} [ADMIN SERVICE] GET /api/admin/clientes"),this.http.get(`${T}/clientes`)}getClientesConInscripciones(){return console.log("\u{1F535} [ADMIN SERVICE] GET /api/admin/clientes (con inscripciones)"),this.http.get(`${T}/clientes`)}createCliente(n){return console.log("\u{1F535} [ADMIN SERVICE] POST /api/admin/clientes",n),this.http.post(`${T}/clientes`,n)}updateCliente(n,e){return console.log("\u{1F535} [ADMIN SERVICE] PUT /api/admin/clientes/"+n,e),this.http.put(`${T}/clientes/${n}`,e)}deleteCliente(n){return console.log("\u{1F535} [ADMIN SERVICE] DELETE /api/admin/clientes/"+n),this.http.delete(`${T}/clientes/${n}`)}addInscripcion(n,e){return console.log(`\u{1F535} [ADMIN SERVICE] POST /api/admin/clientes/${n}/inscripciones`,{horarioId:e}),this.http.post(`${T}/clientes/${n}/inscripciones`,{horarioId:e})}removeInscripcion(n,e){return console.log(`\u{1F535} [ADMIN SERVICE] DELETE /api/admin/clientes/${n}/inscripciones/${e}`),this.http.delete(`${T}/clientes/${n}/inscripciones/${e}`)}uploadImage(n){return console.log("\u{1F535} [ADMIN SERVICE] POST /api/upload/image"),this.http.post(`${Te}/image`,n)}getImagesList(){return console.log("\u{1F535} [ADMIN SERVICE] GET /api/upload/images-list"),this.http.get(`${Te}/images-list`)}createHorario(n){return console.log("\u{1F535} [ADMIN SERVICE] POST /api/admin/horarios",n.toString()),this.http.post(`${T}/horarios`,null,{params:n})}updateHorario(n,e){return console.log("\u{1F535} [ADMIN SERVICE] PUT /api/admin/horarios/"+n,e.toString()),this.http.put(`${T}/horarios/${n}`,null,{params:e})}deleteHorario(n){return console.log("\u{1F535} [ADMIN SERVICE] DELETE /api/admin/horarios/"+n),this.http.delete(`${T}/horarios/${n}`)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=ue({token:s,factory:s.\u0275fac,providedIn:"root"})};var Oe=["editClienteFormRef"],De=["editModal"];function Ne(s,n){if(s&1){let e=x();i(0,"div",81),f(1,"i",82),i(2,"strong"),a(3,"\xA1\xC9xito!"),r(),a(4),i(5,"button",83),S("click",function(){g(e);let o=u();return p(o.successMessage="")}),r()()}if(s&2){let e=u();l(4),C(" ",e.successMessage," ")}}function Ve(s,n){if(s&1){let e=x();i(0,"div",84),f(1,"i",85),i(2,"strong"),a(3,"Error:"),r(),a(4),i(5,"button",83),S("click",function(){g(e);let o=u();return p(o.errorMessage="")}),r()()}if(s&2){let e=u();l(4),C(" ",e.errorMessage," ")}}function Fe(s,n){if(s&1){let e=x();i(0,"div",86),f(1,"i",85),i(2,"strong"),a(3,"Atenci\xF3n:"),r(),a(4," Debes seleccionar un horario para cada taller elegido. "),i(5,"button",83),S("click",function(){g(e);let o=u();return p(o.validationAlert=!1)}),r()()}}function Ue(s,n){s&1&&(i(0,"div",87),a(1," Cargando talleres disponibles... "),r())}function ke(s,n){s&1&&(i(0,"span",92),a(1," (No hay horarios disponibles) "),r())}function We(s,n){if(s&1){let e=x();i(0,"div",88)(1,"input",89),E("ngModelChange",function(o){let d=g(e).$implicit;return h(d.seleccionado,o)||(d.seleccionado=o),p(o)}),r(),i(2,"label",90)(3,"span"),a(4),r(),_(5,ke,2,0,"span",91),r()()}if(s&2){let e=n.$implicit;l(),m("id","checkTaller"+e.id),b("ngModel",e.seleccionado),m("name","tallerSelected"+e.id)("disabled",e.horarios.length===0),l(),m("for","checkTaller"+e.id),l(),L("text-danger",e.horarios.length===0),l(),v(e.nombre),l(),m("ngIf",e.horarios.length===0)}}function He(s,n){if(s&1&&(i(0,"option",98),a(1),r()),s&2){let e=n.$implicit;m("ngValue",e.id),l(),be(" ",e.diasDeClase," - de ",e.horaInicio," a ",e.horaFin," (Prof. ",(e.profesor==null?null:e.profesor.nombreCompleto)||"Sin asignar"," - Vacantes: ",e.vacantesDisponibles,") ")}}function Ge(s,n){if(s&1){let e=x();i(0,"div",93)(1,"h6",94),f(2,"i",95),a(3),r(),i(4,"p",96),a(5,"Elige el horario semanal:"),r(),i(6,"select",97),E("ngModelChange",function(o){let d=g(e).$implicit;return h(d.horarioSeleccionado,o)||(d.horarioSeleccionado=o),p(o)}),i(7,"option",75),a(8,"Selecciona un horario"),r(),_(9,He,2,6,"option",76),r()()}if(s&2){let e=n.$implicit;L("d-none",!e.seleccionado||e.horarios.length===0),m("id","scheduleTaller"+e.id),l(3),C("Horario para ",e.nombre," "),l(3),m("disabled",!e.seleccionado),b("ngModel",e.horarioSeleccionado),m("name","horarioTaller"+e.id),l(),m("ngValue",void 0),l(2),m("ngForOf",e.horarios)}}function Be(s,n){s&1&&(i(0,"div")(1,"span",104),a(2,"No inscrito"),r()())}function ze(s,n){if(s&1){let e=x();ee(0),i(1,"div",105)(2,"span",106),a(3),r(),i(4,"button",107),S("click",function(){let o=g(e).$implicit,d=u().$implicit,c=u();return p(c.eliminarInscripcion(d,o))}),f(5,"i",108),r()(),te()}if(s&2){let e=n.$implicit;l(3),K(" ",(e.horario==null||e.horario.taller==null?null:e.horario.taller.nombre)||"Taller desconocido"," (",(e.horario==null?null:e.horario.diasDeClase)||"Sin d\xEDas"," ",(e.horario==null?null:e.horario.horaInicio)||"","-",(e.horario==null?null:e.horario.horaFin)||"",") ")}}function qe(s,n){if(s&1){let e=x();i(0,"tr")(1,"td"),a(2),r(),i(3,"td"),a(4),r(),i(5,"td"),a(6),r(),i(7,"td"),_(8,Be,3,0,"div",99)(9,ze,6,4,"ng-container",40),r(),i(10,"td")(11,"button",100),S("click",function(){let o=g(e).$implicit,d=u();return p(d.openEditModal(o))}),f(12,"i",101),a(13," Editar "),r(),i(14,"button",102),S("click",function(){let o=g(e).$implicit,d=u();return p(d.confirmBajaSegura(o))}),f(15,"i",103),a(16," Baja "),r()()()}if(s&2){let e=n.$implicit;l(2),v(e.nombreCompleto),l(2),v((e.user==null?null:e.user.email)||e.correo),l(2),v(e.telefono),l(2),m("ngIf",!e.inscripciones||e.inscripciones.length===0),l(),m("ngForOf",e.inscripciones)}}function je(s,n){if(s&1&&(i(0,"option",98),a(1),r()),s&2){let e=n.$implicit;m("ngValue",e.id),l(),C(" ",e.nombre," ")}}function Qe(s,n){if(s&1&&(i(0,"option",98),a(1),r()),s&2){let e=n.$implicit;m("ngValue",e.id),l(),K(" ",e.diasDeClase," ",e.horaInicio,"-",e.horaFin," (Vacantes: ",e.vacantesDisponibles,") ")}}function Je(s,n){if(s&1&&(ee(0),_(1,Qe,2,5,"option",76),te()),s&2){let e=u().$implicit;l(),m("ngForOf",e.horarios)}}function Ye(s,n){if(s&1&&(ee(0),_(1,Je,2,1,"ng-container",99),te()),s&2){let e=n.$implicit,t=u(2);l(),m("ngIf",e.id===t.nuevaInscripcion.tallerId)}}function Ke(s,n){if(s&1){let e=x();i(0,"div",14)(1,"label",73),a(2,"Horario"),r(),i(3,"select",74),E("ngModelChange",function(o){g(e);let d=u();return h(d.nuevaInscripcion.horarioId,o)||(d.nuevaInscripcion.horarioId=o),p(o)}),i(4,"option",75),a(5,"Selecciona un horario"),r(),_(6,Ye,2,1,"ng-container",40),r()()}if(s&2){let e=u();l(3),b("ngModel",e.nuevaInscripcion.horarioId),l(),m("ngValue",void 0),l(2),m("ngForOf",e.talleresDisponiblesParaCliente)}}var J=class s{constructor(n){this.adminService=n}talleres=[];clientes=[];nombreUsuario="";nuevoCliente={};clienteAEditar={};originalCorreo="";validationAlert=!1;successMessage="";errorMessage="";nuevaInscripcion={};editClienteFormRef;editModal;ngOnInit(){console.log("\u{1F535} [ESTUDIANTES ANGULAR] Inicializando componente Estudiantes"),this.cargarTalleresDisponibles(),this.cargarClientes()}cargarTalleresDisponibles(){console.log("\u{1F535} [ESTUDIANTES ANGULAR] Cargando talleres disponibles..."),this.adminService.getTalleresDisponibles().subscribe({next:n=>{console.log("\u2705 [ESTUDIANTES ANGULAR] Talleres disponibles recibidos:",n.length),this.talleres=n.map(e=>({id:e.id,nombre:e.nombre,seleccionado:!1,horarios:(e.horarios||[]).map(t=>({id:t.id,diasDeClase:t.diasDeClase||"",horaInicio:t.horaInicio||"",horaFin:t.horaFin||"",profesor:t.profesor?{nombreCompleto:t.profesor.nombreCompleto}:void 0,vacantesDisponibles:t.vacantesDisponibles||0}))})),console.log("\u{1F4CA} [ESTUDIANTES ANGULAR] Talleres procesados:",this.talleres)},error:n=>{console.error("\u274C [ESTUDIANTES ANGULAR] Error al cargar talleres:",n),this.errorMessage="Error al cargar talleres disponibles"}})}cargarClientes(){console.log("\u{1F535} [ESTUDIANTES ANGULAR] Cargando clientes con inscripciones..."),this.adminService.getClientesConInscripciones().subscribe({next:n=>{console.log("\u2705 [ESTUDIANTES ANGULAR] Clientes recibidos:",n.length),this.clientes=n.map(e=>({id:e.id,nombreCompleto:e.nombreCompleto,correo:e.correo,telefono:e.telefono,user:e.user?{email:e.user.email}:void 0,inscripciones:(e.inscripciones||[]).map(t=>({horario:t.horario?{id:t.horario.id,taller:t.horario.taller?{nombre:t.horario.taller.nombre}:void 0,diasDeClase:t.horario.diasDeClase||"",horaInicio:t.horario.horaInicio||"",horaFin:t.horario.horaFin||""}:void 0}))})),console.log("\u{1F4CA} [ESTUDIANTES ANGULAR] Clientes procesados:",this.clientes)},error:n=>{console.error("\u274C [ESTUDIANTES ANGULAR] Error al cargar clientes:",n),this.errorMessage="Error al cargar la lista de clientes"}})}registrarCliente(n){console.log("\u{1F535} [ESTUDIANTES ANGULAR] Iniciando registro de cliente"),this.validationAlert=!1,this.errorMessage="",this.successMessage="";let e=!0,t={};if(this.talleres.forEach(o=>{o.seleccionado&&o.horarios.length>0&&!o.horarioSeleccionado&&(e=!1,console.warn("\u26A0\uFE0F [ESTUDIANTES ANGULAR] Taller sin horario:",o.nombre)),o.seleccionado&&o.horarioSeleccionado&&(t[o.id]=o.horarioSeleccionado)}),!e){this.validationAlert=!0,console.error("\u274C [ESTUDIANTES ANGULAR] Validaci\xF3n fallida: falta seleccionar horarios");return}if(n.valid){let o={nombreCompleto:this.nuevoCliente.nombreCompleto,correo:this.nuevoCliente.correo,telefono:this.nuevoCliente.telefono,talleresSeleccionados:t};this.adminService.createCliente(o).subscribe({next:d=>{console.log("\u2705 [ESTUDIANTES ANGULAR SUCCESS] Cliente registrado:",d),this.successMessage="Cliente registrado exitosamente. Correo: "+d.email+", Contrase\xF1a temporal: "+d.temporalPassword,n.resetForm(),this.talleres.forEach(c=>{c.seleccionado=!1,c.horarioSeleccionado=void 0}),this.cargarClientes(),this.cargarTalleresDisponibles(),setTimeout(()=>{this.successMessage=""},8e3)},error:d=>{console.error("\u274C [ESTUDIANTES ANGULAR ERROR] Error al registrar cliente:",d),this.errorMessage=d.error?.message||"Error al registrar el cliente"}})}else console.warn("\u26A0\uFE0F [ESTUDIANTES ANGULAR] Formulario inv\xE1lido")}talleresDisponiblesParaCliente=[];openEditModal(n){console.log("\u{1F535} [ESTUDIANTES ANGULAR] Abriendo modal de edici\xF3n para cliente:",n.id),this.clienteAEditar={id:n.id,nombre:n.nombreCompleto,correo:n.user?.email||n.correo,telefono:n.telefono,inscripciones:n.inscripciones},this.originalCorreo=n.user?.email||n.correo,this.nuevaInscripcion={};let e=new Set(n.inscripciones.map(t=>t.horario?.id));this.talleresDisponiblesParaCliente=this.talleres.map(t=>{let o=R({},t);return o.horarios=t.horarios.filter(d=>!e.has(d.id)),o}).filter(t=>t.horarios.length>0),console.log("\u{1F4CA} [ESTUDIANTES ANGULAR] Talleres filtrados para cliente:",this.talleresDisponiblesParaCliente.length)}editarCliente(n){if(console.log("\u{1F535} [ESTUDIANTES ANGULAR] Iniciando edici\xF3n de cliente ID:",this.clienteAEditar.id),n.valid){let e={nombreCompleto:this.clienteAEditar.nombre,correo:this.clienteAEditar.correo,telefono:this.clienteAEditar.telefono};this.adminService.updateCliente(this.clienteAEditar.id,e).subscribe({next:t=>{console.log("\u2705 [ESTUDIANTES ANGULAR SUCCESS] Cliente actualizado:",t),this.successMessage="Cliente actualizado exitosamente",this.cargarClientes();let o=document.getElementById("estudiantes-editModal");if(o){let d=window.bootstrap.Modal.getInstance(o);d&&d.hide()}setTimeout(()=>{this.successMessage=""},5e3)},error:t=>{console.error("\u274C [ESTUDIANTES ANGULAR ERROR] Error al editar cliente:",t),this.errorMessage=t.error?.message||"Error al actualizar el cliente"}})}}confirmBajaSegura(n){console.log("\u{1F535} [ESTUDIANTES ANGULAR] Confirmando baja de cliente:",n.id),confirm("\xBFEst\xE1s seguro de que deseas eliminar completamente al cliente "+n.nombreCompleto+" (ID: "+n.id+")? Esta acci\xF3n es irreversible.")&&this.adminService.deleteCliente(n.id).subscribe({next:e=>{console.log("\u2705 [ESTUDIANTES ANGULAR SUCCESS] Cliente eliminado:",e),this.successMessage="Cliente eliminado exitosamente",this.cargarClientes(),this.cargarTalleresDisponibles(),setTimeout(()=>{this.successMessage=""},5e3)},error:e=>{console.error("\u274C [ESTUDIANTES ANGULAR ERROR] Error al eliminar cliente:",e),this.errorMessage=e.error?.message||"Error al eliminar el cliente"}})}agregarInscripcion(){!this.clienteAEditar.id||!this.nuevaInscripcion.horarioId||(console.log("\u{1F535} [ESTUDIANTES ANGULAR] Agregando inscripci\xF3n:",this.nuevaInscripcion),this.adminService.addInscripcion(this.clienteAEditar.id,this.nuevaInscripcion.horarioId).subscribe({next:n=>{console.log("\u2705 [ESTUDIANTES ANGULAR SUCCESS] Inscripci\xF3n agregada:",n),this.successMessage="Inscripci\xF3n agregada exitosamente",this.cargarClientes(),this.cargarTalleresDisponibles(),this.nuevaInscripcion={};let e=document.getElementById("estudiantes-editModal");if(e){let t=window.bootstrap.Modal.getInstance(e);t&&t.hide()}setTimeout(()=>{this.successMessage=""},5e3)},error:n=>{console.error("\u274C [ESTUDIANTES ANGULAR ERROR] Error al agregar inscripci\xF3n:",n),this.errorMessage=n.error?.message||"Error al agregar inscripci\xF3n"}}))}eliminarInscripcion(n,e){if(!e.horario||!e.horario.id){console.error("\u274C [ESTUDIANTES ANGULAR] Error: ID de horario no encontrado en la inscripci\xF3n");return}let t=e.horario.id,o=e.horario.taller?.nombre||"Taller";confirm("\xBFEst\xE1s seguro de que deseas dar de baja a "+n.nombreCompleto+" del taller "+o+"?")&&(console.log("\u{1F535} [ESTUDIANTES ANGULAR] Eliminando inscripci\xF3n. Cliente:",n.id,"Horario:",t),this.adminService.removeInscripcion(n.id,t).subscribe({next:d=>{console.log("\u2705 [ESTUDIANTES ANGULAR SUCCESS] Inscripci\xF3n eliminada:",d),this.successMessage="Inscripci\xF3n eliminada exitosamente",this.cargarClientes(),this.cargarTalleresDisponibles(),setTimeout(()=>{this.successMessage=""},5e3)},error:d=>{console.error("\u274C [ESTUDIANTES ANGULAR ERROR] Error al eliminar inscripci\xF3n:",d),this.errorMessage=d.error?.message||"Error al eliminar inscripci\xF3n"}}))}static \u0275fac=function(e){return new(e||s)(O(I))};static \u0275cmp=M({type:s,selectors:[["app-estudiantes"]],viewQuery:function(e,t){if(e&1&&(le(Oe,5),le(De,5)),e&2){let o;se(o=de())&&(t.editClienteFormRef=o.first),se(o=de())&&(t.editModal=o.first)}},decls:130,vars:20,consts:[["registroForm","ngForm"],["editForm","ngForm"],[1,"main-content"],[1,"mb-4","text-harmony-title"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["id","estudiantes-validationAlert","class","alert alert-warning alert-dismissible show","role","alert",4,"ngIf"],["id","registro-cliente",1,"mb-5","p-4","border","rounded","shadow-sm","registro-cliente"],[1,"text-harmony-title","mb-4"],[1,"bi","bi-person-add","me-2"],[3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"mb-3","text-secondary"],[1,"mb-3"],["for","nombre",1,"form-label"],["id","nombre","name","nombreCompleto","required","","placeholder","Ej: Juan P\xE9rez",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["id","email","name","correo","type","email","required","","placeholder","ejemplo@correo.com",1,"form-control",3,"ngModelChange","ngModel"],[1,"mb-4"],["for","telefono",1,"form-label"],["id","telefono","name","telefono","type","tel","required","","placeholder","Ej: +51 921 340 064",1,"form-control",3,"ngModelChange","ngModel"],[1,"mb-4","p-3","border","rounded","talleres-box"],[1,"fw-bold","mb-3","text-muted"],["class","alert alert-info",4,"ngIf"],["class","form-check mb-2 d-flex align-items-center",4,"ngFor","ngForOf"],["id","scheduleContainer",1,"mt-4"],["class","card p-3 mb-3",3,"id","d-none",4,"ngFor","ngForOf"],[1,"d-grid","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg"],[1,"bi","bi-check-circle","me-2"],["id","lista-clientes",1,"mt-5"],[1,"bi","bi-list-columns","me-2"],[1,"mb-3","d-flex"],["type","text","id","estudiantes-searchFilter","placeholder","Buscar por nombre, correo o tel\xE9fono...",1,"form-control","w-50"],[1,"btn","btn-secondary","ms-2"],[1,"bi","bi-search"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-dark"],[4,"ngFor","ngForOf"],["id","estudiantes-editModal","tabindex","-1","aria-labelledby","estudiantes-editModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],["id","estudiantes-editModalLabel",1,"modal-title"],[1,"bi","bi-pencil-square","me-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","btn-close-white"],[1,"modal-body"],["id","editTabs","role","tablist",1,"nav","nav-tabs","mb-3"],["role","presentation",1,"nav-item"],["id","datos-tab","data-bs-toggle","tab","data-bs-target","#datos","type","button","role","tab",1,"nav-link","active"],["id","inscripciones-tab","data-bs-toggle","tab","data-bs-target","#inscripciones","type","button","role","tab",1,"nav-link"],["id","editTabsContent",1,"tab-content"],["id","datos","role","tabpanel",1,"tab-pane","fade","show","active"],["type","hidden","id","edit-cliente-id","name","id",3,"ngModelChange","ngModel"],["type","hidden","name","originalCorreo",3,"ngModel"],["role","alert",1,"alert","alert-info","small"],["for","edit-nombre",1,"form-label"],["id","edit-nombre","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-correo",1,"form-label"],["id","edit-correo","name","correo","type","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-telefono",1,"form-label"],["id","edit-telefono","name","telefono","type","tel","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","me-2"],["type","submit",1,"btn","btn-primary"],[1,"bi","bi-save","me-1"],["id","inscripciones","role","tabpanel",1,"tab-pane","fade"],[1,"alert","alert-light","border"],[1,"alert-heading"],[1,"bi","bi-plus-circle","me-2"],[1,"mb-0","small","text-muted"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"d-grid"],[1,"btn","btn-success",3,"click","disabled"],[1,"bi","bi-check-lg","me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"bi","bi-check-circle-fill","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"bi","bi-exclamation-triangle-fill","me-2"],["id","estudiantes-validationAlert","role","alert",1,"alert","alert-warning","alert-dismissible","show"],[1,"alert","alert-info"],[1,"form-check","mb-2","d-flex","align-items-center"],["type","checkbox",1,"form-check-input","me-2",3,"ngModelChange","id","ngModel","name","disabled"],[1,"form-check-label",3,"for"],["class","small text-danger fw-bold ms-2",4,"ngIf"],[1,"small","text-danger","fw-bold","ms-2"],[1,"card","p-3","mb-3",3,"id"],[1,"card-title","text-primary"],[1,"bi","bi-clock-fill","me-2"],[1,"card-subtitle","mb-2","text-muted","small"],[1,"form-select",3,"ngModelChange","disabled","ngModel","name"],[3,"ngValue"],[4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#estudiantes-editModal",1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-x-circle"],[1,"text-muted","small"],[1,"d-flex","align-items-center","mb-1"],[1,"badge","bg-primary","me-2"],["title","Dar de baja del taller",1,"btn","btn-sm","btn-outline-danger","py-0","px-1",3,"click"],[1,"bi","bi-trash"]],template:function(e,t){if(e&1){let o=x();i(0,"div",2)(1,"h1",3),a(2,"Gesti\xF3n de Clientes"),r(),f(3,"hr"),_(4,Ne,6,1,"div",4)(5,Ve,6,1,"div",5)(6,Fe,6,0,"div",6),i(7,"section",7)(8,"h3",8),f(9,"i",9),a(10," Registrar Nuevo Cliente"),r(),i(11,"form",10,0),S("ngSubmit",function(){g(o);let c=A(12);return p(t.registrarCliente(c))}),i(13,"div",11)(14,"div",12)(15,"h5",13),a(16,"Datos Personales"),r(),i(17,"div",14)(18,"label",15),a(19,"Nombre Completo"),r(),i(20,"input",16),E("ngModelChange",function(c){return g(o),h(t.nuevoCliente.nombreCompleto,c)||(t.nuevoCliente.nombreCompleto=c),p(c)}),r()(),i(21,"div",14)(22,"label",17),a(23,"Correo Electr\xF3nico"),r(),i(24,"input",18),E("ngModelChange",function(c){return g(o),h(t.nuevoCliente.correo,c)||(t.nuevoCliente.correo=c),p(c)}),r()(),i(25,"div",19)(26,"label",20),a(27,"Tel\xE9fono"),r(),i(28,"input",21),E("ngModelChange",function(c){return g(o),h(t.nuevoCliente.telefono,c)||(t.nuevoCliente.telefono=c),p(c)}),r()()(),i(29,"div",12)(30,"h5",13),a(31,"Selecci\xF3n de Talleres y Horarios"),r(),i(32,"div",22)(33,"p",23),a(34,"Talleres Disponibles:"),r(),_(35,Ue,2,0,"div",24)(36,We,6,9,"div",25),r(),i(37,"div",26),_(38,Ge,10,9,"div",27),r()()(),i(39,"div",28)(40,"button",29),f(41,"i",30),a(42," Registrar Cliente "),r()()()(),f(43,"hr"),i(44,"section",31)(45,"h3",8),f(46,"i",32),a(47," Clientes Registrados"),r(),i(48,"div",33),f(49,"input",34),i(50,"button",35),f(51,"i",36),a(52," Buscar"),r()(),i(53,"div",37)(54,"table",38)(55,"thead",39)(56,"tr")(57,"th"),a(58,"Nombre Completo"),r(),i(59,"th"),a(60,"Correo"),r(),i(61,"th"),a(62,"Tel\xE9fono"),r(),i(63,"th"),a(64,"Talleres Inscritos"),r(),i(65,"th"),a(66,"Acciones"),r()()(),i(67,"tbody"),_(68,qe,17,5,"tr",40),r()()()()(),i(69,"div",41)(70,"div",42)(71,"div",43)(72,"div",44)(73,"h5",45),f(74,"i",46),a(75," Editar Cliente "),r(),f(76,"button",47),r(),i(77,"div",48)(78,"ul",49)(79,"li",50)(80,"button",51),a(81,"Datos Personales"),r()(),i(82,"li",50)(83,"button",52),a(84,"Nueva Inscripci\xF3n"),r()()(),i(85,"div",53)(86,"div",54)(87,"form",10,1),S("ngSubmit",function(){g(o);let c=A(88);return p(t.editarCliente(c))}),i(89,"input",55),E("ngModelChange",function(c){return g(o),h(t.clienteAEditar.id,c)||(t.clienteAEditar.id=c),p(c)}),r(),f(90,"input",56),i(91,"div",57),a(92," Al actualizar el correo del cliente se generar\xE1 una nueva contrase\xF1a temporal y se enviar\xE1 un aviso de cambio a este nuevo correo. "),r(),i(93,"div",14)(94,"label",58),a(95,"Nombre Completo"),r(),i(96,"input",59),E("ngModelChange",function(c){return g(o),h(t.clienteAEditar.nombre,c)||(t.clienteAEditar.nombre=c),p(c)}),r()(),i(97,"div",14)(98,"label",60),a(99,"Correo Electr\xF3nico"),r(),i(100,"input",61),E("ngModelChange",function(c){return g(o),h(t.clienteAEditar.correo,c)||(t.clienteAEditar.correo=c),p(c)}),r()(),i(101,"div",14)(102,"label",62),a(103,"Tel\xE9fono"),r(),i(104,"input",63),E("ngModelChange",function(c){return g(o),h(t.clienteAEditar.telefono,c)||(t.clienteAEditar.telefono=c),p(c)}),r()(),i(105,"div",64)(106,"button",65),a(107,"Cancelar"),r(),i(108,"button",66),f(109,"i",67),a(110," Guardar Cambios "),r()()()(),i(111,"div",68)(112,"div",69)(113,"h6",70),f(114,"i",71),a(115,"Agregar nueva inscripci\xF3n "),r(),i(116,"p",72),a(117,"Selecciona un taller y horario para inscribir al cliente. "),r()(),i(118,"div",14)(119,"label",73),a(120,"Taller"),r(),i(121,"select",74),E("ngModelChange",function(c){return g(o),h(t.nuevaInscripcion.tallerId,c)||(t.nuevaInscripcion.tallerId=c),p(c)}),i(122,"option",75),a(123,"Selecciona un taller"),r(),_(124,je,2,2,"option",76),r()(),_(125,Ke,7,3,"div",77),i(126,"div",78)(127,"button",79),S("click",function(){return g(o),p(t.agregarInscripcion())}),f(128,"i",80),a(129," Inscribir Cliente "),r()()()()()()()()}e&2&&(l(4),m("ngIf",t.successMessage),l(),m("ngIf",t.errorMessage),l(),m("ngIf",t.validationAlert),l(14),b("ngModel",t.nuevoCliente.nombreCompleto),l(4),b("ngModel",t.nuevoCliente.correo),l(4),b("ngModel",t.nuevoCliente.telefono),l(7),m("ngIf",t.talleres.length===0),l(),m("ngForOf",t.talleres),l(2),m("ngForOf",t.talleres),l(30),m("ngForOf",t.clientes),l(21),b("ngModel",t.clienteAEditar.id),l(),m("ngModel",t.originalCorreo),l(6),b("ngModel",t.clienteAEditar.nombre),l(4),b("ngModel",t.clienteAEditar.correo),l(4),b("ngModel",t.clienteAEditar.telefono),l(17),b("ngModel",t.nuevaInscripcion.tallerId),l(),m("ngValue",void 0),l(2),m("ngForOf",t.talleresDisponiblesParaCliente),l(),m("ngIf",t.nuevaInscripcion.tallerId),l(2),m("disabled",!t.nuevaInscripcion.horarioId))},dependencies:[w,N,V,P,G,z,q,F,ie,B,U,k,j,H,W],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--dashboard-fondo-general: #f8f9fa;--sidebar-ancho: 250px;--sidebar-fondo: #343a40;--sidebar-texto: rgba(255, 255, 255, .8);--sidebar-hover-fondo: #495057;--sidebar-hover-texto: white;--sidebar-borde: 1px solid #495057;--logout-color: #dc3545;--contenido-fondo: white;--contenido-sombra: 0 4px 12px rgba(0, 0, 0, .1)}body[_ngcontent-%COMP%]{background-color:#f8f9fa}.sidebar[_ngcontent-%COMP%]{width:250px;height:100vh;position:fixed;top:0;left:0;padding-top:20px;background-color:#343a40;color:#fff;z-index:1000}.header-logo-dashboard[_ngcontent-%COMP%]{padding:0 20px 20px;border-bottom:1px solid #495057;margin-bottom:15px}.nav-link-item[_ngcontent-%COMP%]{color:#fffc;padding:15px 20px;text-decoration:none;display:block;transition:background-color .2s,color .2s}.nav-link-item[_ngcontent-%COMP%]:hover, .nav-link-item.active[_ngcontent-%COMP%]{background-color:#495057;color:#fff}.nav-link-logout[_ngcontent-%COMP%]{color:#dc3545}.nav-link-logout[_ngcontent-%COMP%]:hover{background-color:#495057;color:#dc3545}.main-content[_ngcontent-%COMP%]{margin-left:250px;padding:20px}.calendar-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 4px 12px #0000001a}.table-dark[_ngcontent-%COMP%]{--bs-table-bg: #212529;color:#fff}.password-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:30px;box-shadow:0 4px 12px #0000001a}.password-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:10px 15px;border-radius:6px}.btn-confirmar-password[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;font-weight:700;padding:10px 20px;transition:background-color .3s ease}.btn-confirmar-password[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.text-harmony-title[_ngcontent-%COMP%]{color:#5e3ea1!important;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.1)}.main-content[_ngcontent-%COMP%]   h1.text-harmony-title[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem!important}.main-content[_ngcontent-%COMP%]   h2.text-harmony-title[_ngcontent-%COMP%]{font-size:1.8rem;border-bottom:2px solid #724fd2;padding-bottom:5px}#registro-cliente[_ngcontent-%COMP%]{background-color:#f8f1e9}.text-harmony-title[_ngcontent-%COMP%]{color:#5e3ea1!important;font-weight:700}.main-content[_ngcontent-%COMP%]{padding-top:20px;margin-left:250px}.user-info[_ngcontent-%COMP%]{color:#fff;padding:5px 15px 15px;text-align:center;border-bottom:1px solid rgba(255,255,255,.1);margin-bottom:10px}']})};function Xe(s,n){if(s&1){let e=x();i(0,"div",57),f(1,"i",58),i(2,"strong"),a(3,"\xA1\xC9xito!"),r(),a(4),i(5,"button",59),S("click",function(){g(e);let o=u();return p(o.successMessage="")}),r()()}if(s&2){let e=u();l(4),C(" ",e.successMessage," ")}}function Ze(s,n){if(s&1){let e=x();i(0,"div",60),f(1,"i",61),i(2,"strong"),a(3,"Error:"),r(),a(4),i(5,"button",59),S("click",function(){g(e);let o=u();return p(o.errorMessage="")}),r()()}if(s&2){let e=u();l(4),C(" ",e.errorMessage," ")}}function $e(s,n){if(s&1&&(i(0,"option",62),a(1),r()),s&2){let e=n.$implicit;m("value",e.url),l(),C(" ",e.filename," ")}}function et(s,n){if(s&1&&(i(0,"div",63),f(1,"img",64),r()),s&2){let e=u();l(),m("src",e.getImagePreview(e.nuevoProfesor.fotoUrl),y)}}function tt(s,n){if(s&1){let e=x();i(0,"tr",65)(1,"td")(2,"img",66),S("error",function(o){g(e);let d=u();return p(d.onImageError(o))}),r()(),i(3,"td"),a(4),r(),i(5,"td"),a(6),r(),i(7,"td"),a(8),r(),i(9,"td")(10,"button",67),S("click",function(){let o=g(e).$implicit,d=u();return p(d.cargarEdicion(o))}),f(11,"i",68),a(12," Editar "),r(),i(13,"button",69),S("click",function(){let o=g(e).$implicit,d=u();return p(d.eliminarProfesor(o.id))}),f(14,"i",70),a(15," Eliminar "),r()()()}if(s&2){let e=n.$implicit,t=u();l(2),m("src",t.getFoto(e),y),l(2),v(e.nombreCompleto),l(2),v(e.correo),l(2),v(e.telefono)}}function it(s,n){if(s&1&&(i(0,"option",62),a(1),r()),s&2){let e=n.$implicit;m("value",e.url),l(),C(" ",e.filename," ")}}function rt(s,n){if(s&1&&(i(0,"div",63),f(1,"img",92),r()),s&2){let e=u(2);l(),m("src",e.getImagePreview(e.profesorAEditar.fotoUrl),y)}}function nt(s,n){if(s&1){let e=x();i(0,"div",71)(1,"div",72)(2,"div",73)(3,"div",74)(4,"h5",75),a(5,"Editar Informaci\xF3n del Profesor"),r(),f(6,"button",76),r(),i(7,"form",22,1),S("ngSubmit",function(){g(e);let o=u();return p(o.guardarEdicion())}),i(9,"div",77)(10,"div",7)(11,"label",78),a(12,"Nombre Completo"),r(),i(13,"input",79),E("ngModelChange",function(o){g(e);let d=u();return h(d.profesorAEditar.nombreCompleto,o)||(d.profesorAEditar.nombreCompleto=o),p(o)}),r()(),i(14,"div",7)(15,"label",80),a(16,"Correo Electr\xF3nico"),r(),i(17,"input",81),E("ngModelChange",function(o){g(e);let d=u();return h(d.profesorAEditar.correo,o)||(d.profesorAEditar.correo=o),p(o)}),r()(),i(18,"div",7)(19,"label",82),a(20,"Tel\xE9fono"),r(),i(21,"input",83),E("ngModelChange",function(o){g(e);let d=u();return h(d.profesorAEditar.telefono,o)||(d.profesorAEditar.telefono=o),p(o)}),r()(),i(22,"div",7)(23,"label",84),a(24,"Foto del Profesor"),r(),i(25,"select",85),E("ngModelChange",function(o){g(e);let d=u();return h(d.profesorAEditar.fotoUrl,o)||(d.profesorAEditar.fotoUrl=o),p(o)}),i(26,"option",34),a(27,"-- Seleccionar foto --"),r(),_(28,it,2,2,"option",35),r(),_(29,rt,2,1,"div",37),r(),i(30,"div",7)(31,"label",86),a(32,"Informaci\xF3n / Descripci\xF3n"),r(),i(33,"textarea",87),E("ngModelChange",function(o){g(e);let d=u();return h(d.profesorAEditar.informacion,o)||(d.profesorAEditar.informacion=o),p(o)}),r()()(),i(34,"div",88)(35,"button",89),a(36,"Cancelar"),r(),i(37,"button",90),f(38,"i",91),a(39," Guardar Cambios "),r()()()()()()}if(s&2){let e=u();l(13),b("ngModel",e.profesorAEditar.nombreCompleto),l(4),b("ngModel",e.profesorAEditar.correo),l(4),b("ngModel",e.profesorAEditar.telefono),l(4),b("ngModel",e.profesorAEditar.fotoUrl),l(3),m("ngForOf",e.imagenesDisponibles),l(),m("ngIf",e.profesorAEditar.fotoUrl),l(4),b("ngModel",e.profesorAEditar.informacion)}}var Y=class s{constructor(n){this.adminService=n}nuevoProfesor={id:0,nombreCompleto:"",correo:"",telefono:"",fotoUrl:"",informacion:""};profesorAEditar=null;profesores=[];imagenesDisponibles=[];successMessage="";errorMessage="";uploadingNewImage=!1;ngOnInit(){console.log("\u{1F535} [PROFESORES ANGULAR] Inicializando componente Profesores"),this.cargarProfesores(),this.cargarImagenesDisponibles()}cargarProfesores(){console.log("\u{1F535} [PROFESORES ANGULAR] Cargando profesores desde backend..."),this.adminService.getProfesores().subscribe({next:n=>{console.log("\u2705 [PROFESORES ANGULAR] Profesores recibidos:",n),this.profesores=n.map(e=>({id:e.id,nombreCompleto:e.nombreCompleto,correo:e.correo||"",telefono:e.telefono||"",fotoUrl:e.fotoUrl||"",informacion:e.informacion||""})),console.log("\u{1F4CA} [PROFESORES ANGULAR] Profesores procesados:",this.profesores.length)},error:n=>{console.error("\u274C [PROFESORES ANGULAR] Error cargando profesores:",n),this.errorMessage="Error al cargar la lista de profesores"}})}cargarImagenesDisponibles(){console.log("\u{1F535} [PROFESORES ANGULAR] Cargando lista de im\xE1genes disponibles..."),this.adminService.getImagesList().subscribe({next:n=>{n.success&&n.images&&(this.imagenesDisponibles=n.images,console.log("\u2705 [PROFESORES ANGULAR] Im\xE1genes disponibles:",this.imagenesDisponibles.length))},error:n=>{console.error("\u274C [PROFESORES ANGULAR] Error al cargar lista de im\xE1genes:",n)}})}triggerFileUpload(){let n=document.getElementById("uploadProfesorImageFile");n&&n.click()}onUploadNewImage(n){let e=n.target.files[0];if(!e)return;if(console.log("\u{1F535} [PROFESORES ANGULAR] Subiendo nueva imagen:",e.name),e.size>5*1024*1024){this.errorMessage="La imagen no debe superar los 5MB";return}if(!e.type.startsWith("image/")){this.errorMessage="Solo se permiten archivos de imagen";return}this.uploadingNewImage=!0;let t=new FormData;t.append("file",e),this.adminService.uploadImage(t).subscribe({next:o=>{console.log("\u2705 [PROFESORES ANGULAR] Imagen subida exitosamente:",o),this.successMessage=`Foto "${o.filename}" subida exitosamente`,this.cargarImagenesDisponibles(),this.uploadingNewImage=!1;let d=document.getElementById("uploadProfesorImageFile");d&&(d.value=""),setTimeout(()=>{this.successMessage=""},3e3)},error:o=>{console.error("\u274C [PROFESORES ANGULAR] Error al subir imagen:",o),this.errorMessage=o.error?.message||"Error al subir la imagen",this.uploadingNewImage=!1}})}registrarProfesor(){if(console.log("\u{1F535} [PROFESORES ANGULAR] Iniciando registro de profesor"),console.log("\u{1F4DD} [PROFESORES ANGULAR] Datos del nuevo profesor:",this.nuevoProfesor),this.errorMessage="",this.successMessage="",!this.nuevoProfesor.nombreCompleto||!this.nuevoProfesor.correo||!this.nuevoProfesor.telefono){console.warn("\u26A0\uFE0F [PROFESORES ANGULAR] Datos incompletos"),this.errorMessage="Por favor completa todos los campos obligatorios";return}let n={nombreCompleto:this.nuevoProfesor.nombreCompleto,correo:this.nuevoProfesor.correo,telefono:this.nuevoProfesor.telefono,fotoUrl:this.nuevoProfesor.fotoUrl,informacion:this.nuevoProfesor.informacion};console.log("\u{1F4E4} [PROFESORES ANGULAR] Enviando payload:",n),this.adminService.createProfesor(n).subscribe({next:e=>{console.log("\u2705 [PROFESORES ANGULAR SUCCESS] Profesor registrado:",e),this.successMessage="Profesor registrado exitosamente",this.nuevoProfesor={id:0,nombreCompleto:"",correo:"",telefono:"",fotoUrl:"",informacion:""},this.cargarProfesores(),setTimeout(()=>{this.successMessage=""},5e3)},error:e=>{console.error("\u274C [PROFESORES ANGULAR ERROR] Error al registrar profesor:",e),this.errorMessage=e.error?.message||"Error al registrar el profesor"}})}cargarEdicion(n){console.log("\u{1F535} [PROFESORES ANGULAR] Cargando datos para edici\xF3n:",n.id),this.profesorAEditar=R({},n),console.log("\u{1F4DD} [PROFESORES ANGULAR] Datos a editar:",this.profesorAEditar)}guardarEdicion(){if(console.log("\u{1F535} [PROFESORES ANGULAR] Guardando edici\xF3n de profesor"),this.profesorAEditar){console.log("\u{1F4E4} [PROFESORES ANGULAR] Enviando actualizaci\xF3n:",this.profesorAEditar);let n={nombreCompleto:this.profesorAEditar.nombreCompleto,correo:this.profesorAEditar.correo,telefono:this.profesorAEditar.telefono,fotoUrl:this.profesorAEditar.fotoUrl,informacion:this.profesorAEditar.informacion};this.adminService.updateProfesor(this.profesorAEditar.id,n).subscribe({next:e=>{console.log("\u2705 [PROFESORES ANGULAR SUCCESS] Profesor actualizado:",e),this.successMessage="Profesor actualizado exitosamente",this.cargarProfesores(),this.profesorAEditar=null,setTimeout(()=>{this.successMessage=""},5e3)},error:e=>{console.error("\u274C [PROFESORES ANGULAR ERROR] Error al actualizar profesor:",e),this.errorMessage=e.error?.message||"Error al actualizar el profesor"}})}}eliminarProfesor(n){let e=this.profesores.find(t=>t.id===n);console.log("\u{1F535} [PROFESORES ANGULAR] Confirmando eliminaci\xF3n de profesor:",n),e&&confirm(`\xBFEst\xE1s seguro de que deseas eliminar a ${e.nombreCompleto}? Esta acci\xF3n es irreversible.`)?(console.log("\u{1F4E4} [PROFESORES ANGULAR] Eliminando profesor ID:",n),this.adminService.deleteProfesor(n).subscribe({next:t=>{console.log("\u2705 [PROFESORES ANGULAR SUCCESS] Profesor eliminado:",t),this.successMessage="Profesor eliminado exitosamente",this.cargarProfesores(),setTimeout(()=>{this.successMessage=""},5e3)},error:t=>{console.error("\u274C [PROFESORES ANGULAR ERROR] Error al eliminar profesor:",t),this.errorMessage=t.error?.message||"Error al eliminar el profesor"}})):console.log("\u26A0\uFE0F [PROFESORES ANGULAR] Eliminaci\xF3n cancelada")}getFoto(n){let e="/profesorGuitarra.jpg";if(!n||!n.fotoUrl)return e;let t=n.fotoUrl.trim();return/^https?:\/\//i.test(t)?t:t.startsWith("/images/")?`http://localhost:8080${t}`:t.startsWith("/")?`http://localhost:8080${t}`:`http://localhost:8080/images/${t}`}getImagePreview(n){return n?n.startsWith("http://")||n.startsWith("https://")?n:`http://localhost:8080${n}`:""}onImageError(n){let e=n.target;e&&(e.onerror=null,e.src="/profesorGuitarra.jpg")}static \u0275fac=function(e){return new(e||s)(O(I))};static \u0275cmp=M({type:s,selectors:[["app-profesores"]],decls:93,vars:15,consts:[["profesorForm","ngForm"],["editForm","ngForm"],[1,"main-content"],[1,"mb-4","text-harmony-title"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"mb-4","p-3","border","rounded","bg-light"],[1,"mb-3"],[1,"bi","bi-cloud-upload","me-2"],[1,"row","align-items-end"],[1,"col-md-8"],["type","file","id","uploadProfesorImageFile","accept","image/*",1,"form-control",3,"change","disabled"],[1,"col-md-4"],[1,"btn","btn-primary","w-100",3,"click","disabled"],[1,"bi","bi-upload","me-2"],[1,"text-muted","mt-2","d-block"],[1,"bi","bi-info-circle"],["id","registro-profesor",1,"mb-5","p-4","border","rounded","shadow-sm"],[1,"text-harmony-title","mb-4"],[1,"bi","bi-person-plus","me-2"],[1,"row","justify-content-center"],[1,"col-lg-10"],[3,"ngSubmit"],[1,"row"],[1,"col-md-12"],[1,"mb-3","text-secondary"],["for","nombreProfesor",1,"form-label"],["type","text","name","nombreCompleto","id","nombreProfesor","placeholder","Ej: Sof\xEDa L\xF3pez","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","emailProfesor",1,"form-label"],["type","email","name","correo","id","emailProfesor","placeholder","profesor@harmony.com","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","telefonoProfesor",1,"form-label"],["type","tel","name","telefono","id","telefonoProfesor","placeholder","Ej: 999 888 777","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","fotoUrlProfesorSelect",1,"form-label"],["id","fotoUrlProfesorSelect","name","fotoUrl",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],["class","mt-2",4,"ngIf"],["for","informacionProfesor",1,"form-label"],["name","informacion","id","informacionProfesor","rows","3","placeholder","Ej: Profesor de Guitarra Cl\xE1sica con 10 a\xF1os de experiencia...",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-sm","btn-outline-secondary","mb-3",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"d-grid","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"bi","bi-check-circle","me-2"],["id","lista-profesores",1,"mt-5"],[1,"bi","bi-list-columns-reverse","me-2"],[1,"mb-3","d-flex","align-items-center"],["type","text","id","searchFilterProfesor","placeholder","Buscar por nombre, taller o correo...",1,"form-control","w-50"],[1,"btn","btn-secondary","ms-2"],[1,"bi","bi-search"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-dark"],[2,"width","80px"],["style","vertical-align: middle;",4,"ngFor","ngForOf"],["class","modal fade","id","editProfesorModal","tabindex","-1","aria-labelledby","editProfesorModalLabel","aria-hidden","true",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"bi","bi-check-circle-fill","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[3,"value"],[1,"mt-2"],["alt","Preview",1,"img-thumbnail",2,"max-height","120px",3,"src"],[2,"vertical-align","middle"],["alt","Foto",2,"width","100px","height","100px","object-fit","cover","border-radius","4px",3,"error","src"],["data-bs-toggle","modal","data-bs-target","#editProfesorModal",1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],["id","editProfesorModal","tabindex","-1","aria-labelledby","editProfesorModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],["id","editProfesorModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","btn-close-white"],[1,"modal-body"],["for","edit-nombreProfesor",1,"form-label"],["type","text","name","edit-nombreCompleto","id","edit-nombreProfesor","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-emailProfesor",1,"form-label"],["type","email","name","edit-correo","id","edit-emailProfesor","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-telefonoProfesor",1,"form-label"],["type","tel","name","edit-telefono","id","edit-telefonoProfesor","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-fotoUrlProfesorSelect",1,"form-label"],["id","edit-fotoUrlProfesorSelect","name","edit-fotoUrl",1,"form-select",3,"ngModelChange","ngModel"],["for","edit-informacionProfesor",1,"form-label"],["name","edit-informacion","id","edit-informacionProfesor","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],[1,"bi","bi-save","me-1"],["alt","Preview",1,"img-thumbnail",2,"max-height","100px",3,"src"]],template:function(e,t){if(e&1){let o=x();i(0,"div",2)(1,"h1",3),a(2,"Gesti\xF3n de Profesores"),r(),f(3,"hr"),_(4,Xe,6,1,"div",4)(5,Ze,6,1,"div",5),i(6,"section",6)(7,"h5",7),f(8,"i",8),a(9," Subir Nueva Foto de Profesor"),r(),i(10,"div",9)(11,"div",10)(12,"input",11),S("change",function(c){return g(o),p(t.onUploadNewImage(c))}),r()(),i(13,"div",12)(14,"button",13),S("click",function(){return g(o),p(t.triggerFileUpload())}),f(15,"i",14),a(16),r()()(),i(17,"small",15),f(18,"i",16),a(19," Las fotos se guardar\xE1n con su nombre original en el servidor "),r()(),i(20,"section",17)(21,"h3",18),f(22,"i",19),a(23," A\xF1adir Nuevo Profesor"),r(),i(24,"div",20)(25,"div",21)(26,"form",22,0),S("ngSubmit",function(){return g(o),p(t.registrarProfesor())}),i(28,"div",23)(29,"div",24)(30,"h5",25),a(31,"Datos del Profesor"),r(),i(32,"div",7)(33,"label",26),a(34,"Nombre Completo *"),r(),i(35,"input",27),E("ngModelChange",function(c){return g(o),h(t.nuevoProfesor.nombreCompleto,c)||(t.nuevoProfesor.nombreCompleto=c),p(c)}),r()(),i(36,"div",7)(37,"label",28),a(38,"Correo Electr\xF3nico *"),r(),i(39,"input",29),E("ngModelChange",function(c){return g(o),h(t.nuevoProfesor.correo,c)||(t.nuevoProfesor.correo=c),p(c)}),r()(),i(40,"div",7)(41,"label",30),a(42,"Tel\xE9fono *"),r(),i(43,"input",31),E("ngModelChange",function(c){return g(o),h(t.nuevoProfesor.telefono,c)||(t.nuevoProfesor.telefono=c),p(c)}),r()(),i(44,"div",7)(45,"label",32),a(46,"Foto del Profesor"),r(),i(47,"select",33),E("ngModelChange",function(c){return g(o),h(t.nuevoProfesor.fotoUrl,c)||(t.nuevoProfesor.fotoUrl=c),p(c)}),i(48,"option",34),a(49,"-- Seleccionar foto --"),r(),_(50,$e,2,2,"option",35),r(),i(51,"small",36),f(52,"i",16),a(53," Sube primero la foto en la secci\xF3n superior "),r(),_(54,et,2,1,"div",37),r(),i(55,"div",7)(56,"label",38),a(57,"Informaci\xF3n / Descripci\xF3n"),r(),i(58,"textarea",39),E("ngModelChange",function(c){return g(o),h(t.nuevoProfesor.informacion,c)||(t.nuevoProfesor.informacion=c),p(c)}),r()(),i(59,"button",40),S("click",function(){return g(o),p(t.cargarImagenesDisponibles())}),f(60,"i",41),a(61," Actualizar lista de fotos "),r()()(),i(62,"div",42)(63,"button",43),f(64,"i",44),a(65," Registrar Profesor "),r()()()()()(),f(66,"hr"),i(67,"section",45)(68,"h3",18),f(69,"i",46),a(70," Listado de Profesores"),r(),i(71,"div",47),f(72,"input",48),i(73,"button",49),f(74,"i",50),a(75," Buscar"),r()(),i(76,"div",51)(77,"table",52)(78,"thead",53)(79,"tr")(80,"th",54),a(81,"Foto"),r(),i(82,"th"),a(83,"Nombre"),r(),i(84,"th"),a(85,"Correo"),r(),i(86,"th"),a(87,"Tel\xE9fono"),r(),i(88,"th"),a(89,"Acciones"),r()()(),i(90,"tbody"),_(91,tt,16,4,"tr",55),r()()()(),_(92,nt,40,7,"div",56),r()}if(e&2){let o=A(27);l(4),m("ngIf",t.successMessage),l(),m("ngIf",t.errorMessage),l(7),m("disabled",t.uploadingNewImage),l(2),m("disabled",t.uploadingNewImage),l(2),C(" ",t.uploadingNewImage?"Subiendo...":"Subir Foto"," "),l(19),b("ngModel",t.nuevoProfesor.nombreCompleto),l(4),b("ngModel",t.nuevoProfesor.correo),l(4),b("ngModel",t.nuevoProfesor.telefono),l(4),b("ngModel",t.nuevoProfesor.fotoUrl),l(3),m("ngForOf",t.imagenesDisponibles),l(4),m("ngIf",t.nuevoProfesor.fotoUrl),l(4),b("ngModel",t.nuevoProfesor.informacion),l(5),m("disabled",o.invalid),l(28),m("ngForOf",t.profesores),l(),m("ngIf",t.profesorAEditar)}},dependencies:[P,G,z,q,F,B,U,k,j,H,W,w,N,V],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--dashboard-fondo-general: #f8f9fa;--sidebar-ancho: 250px;--sidebar-fondo: #343a40;--sidebar-texto: rgba(255, 255, 255, .8);--sidebar-hover-fondo: #495057;--sidebar-hover-texto: white;--sidebar-borde: 1px solid #495057;--logout-color: #dc3545;--contenido-fondo: white;--contenido-sombra: 0 4px 12px rgba(0, 0, 0, .1)}body[_ngcontent-%COMP%]{background-color:#f8f9fa}.sidebar[_ngcontent-%COMP%]{width:250px;height:100vh;position:fixed;top:0;left:0;padding-top:20px;background-color:#343a40;color:#fff;z-index:1000}.header-logo-dashboard[_ngcontent-%COMP%]{padding:0 20px 20px;border-bottom:1px solid #495057;margin-bottom:15px}.nav-link-item[_ngcontent-%COMP%]{color:#fffc;padding:15px 20px;text-decoration:none;display:block;transition:background-color .2s,color .2s}.nav-link-item[_ngcontent-%COMP%]:hover, .nav-link-item.active[_ngcontent-%COMP%]{background-color:#495057;color:#fff}.nav-link-logout[_ngcontent-%COMP%]{color:#dc3545}.nav-link-logout[_ngcontent-%COMP%]:hover{background-color:#495057;color:#dc3545}.main-content[_ngcontent-%COMP%]{margin-left:250px;padding:20px}.calendar-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 4px 12px #0000001a}.table-dark[_ngcontent-%COMP%]{--bs-table-bg: #212529;color:#fff}.password-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:30px;box-shadow:0 4px 12px #0000001a}.password-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:10px 15px;border-radius:6px}.btn-confirmar-password[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;font-weight:700;padding:10px 20px;transition:background-color .3s ease}.btn-confirmar-password[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.text-harmony-title[_ngcontent-%COMP%]{color:#5e3ea1!important;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.1)}.main-content[_ngcontent-%COMP%]   h1.text-harmony-title[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem!important}.main-content[_ngcontent-%COMP%]   h2.text-harmony-title[_ngcontent-%COMP%]{font-size:1.8rem;border-bottom:2px solid #724fd2;padding-bottom:5px}.text-harmony-title[_ngcontent-%COMP%]{color:#5e3ea1!important;font-weight:700}#registro-profesor[_ngcontent-%COMP%]{background-color:#f8f1e9}.main-content[_ngcontent-%COMP%]{padding-top:20px}.user-info[_ngcontent-%COMP%]{color:#fff;padding:5px 15px 15px;text-align:center;border-bottom:1px solid rgba(255,255,255,.1);margin-bottom:10px}']})};function ot(s,n){if(s&1){let e=x();i(0,"div",88),f(1,"i",89),a(2),i(3,"button",90),S("click",function(){g(e);let o=u();return p(o.successMessage="")}),r()()}if(s&2){let e=u();l(2),C(" ",e.successMessage," ")}}function at(s,n){if(s&1){let e=x();i(0,"div",91),f(1,"i",92),a(2),i(3,"button",90),S("click",function(){g(e);let o=u();return p(o.errorMessage="")}),r()()}if(s&2){let e=u();l(2),C(" ",e.errorMessage," ")}}function lt(s,n){if(s&1&&(i(0,"option",93),a(1),r()),s&2){let e=n.$implicit;m("value",e.url),l(),C(" ",e.filename," ")}}function st(s,n){if(s&1&&(i(0,"div",94),f(1,"img",95),r()),s&2){let e=u();l(),m("src",e.getImagePreview(e.nuevoTaller.imagenTaller),y)}}function dt(s,n){if(s&1&&(i(0,"option",93),a(1),r()),s&2){let e=n.$implicit;m("value",e.url),l(),C(" ",e.filename," ")}}function ct(s,n){if(s&1&&(i(0,"div",94),f(1,"img",95),r()),s&2){let e=u();l(),m("src",e.getImagePreview(e.nuevoTaller.imagenInicio),y)}}function mt(s,n){s&1&&(i(0,"span",96),f(1,"span",97),a(2," Subiendo... "),r())}function gt(s,n){if(s&1&&(i(0,"option",93),a(1),r()),s&2){let e=n.$implicit;m("value",e.id),l(),v(e.nombre)}}function pt(s,n){if(s&1&&(i(0,"option",93),a(1),r()),s&2){let e=n.$implicit;m("value",e.id),l(),v(e.nombreCompleto)}}function ut(s,n){if(s&1&&(i(0,"span",102),a(1),r()),s&2){let e=u(2);l(),C(" Selecciona ",e.maxClasesPorSemana," d\xEDas ")}}function ft(s,n){if(s&1){let e=x();i(0,"div",103)(1,"input",104),S("change",function(){let o=g(e).$implicit,d=u(2);return p(d.toggleDia(o))}),r(),i(2,"label",105),a(3),r()()}if(s&2){let e=n.$implicit,t=u(2);l(),m("id","dia_"+e)("checked",t.isDiaSelected(e))("disabled",!t.isDiaSelected(e)&&t.nuevoHorario.diasDeClase.length>=t.maxClasesPorSemana),l(),m("for","dia_"+e),l(),v(e)}}function bt(s,n){if(s&1&&(i(0,"div",106),a(1),r()),s&2){let e=u(2);l(),C(" Debes seleccionar exactamente ",e.maxClasesPorSemana," d\xEDas. ")}}function ht(s,n){if(s&1&&(i(0,"div",9)(1,"label",98),a(2," D\xEDa(s) de la Semana * "),_(3,ut,2,1,"span",99),r(),_(4,ft,4,5,"div",100)(5,bt,2,1,"div",101),r()),s&2){let e=u();l(3),m("ngIf",e.maxClasesPorSemana>0),l(),m("ngForOf",e.diasSemana),l(),m("ngIf",e.nuevoHorario.diasDeClase.length!==e.maxClasesPorSemana&&e.maxClasesPorSemana>0)}}function Et(s,n){if(s&1&&(i(0,"option",93),a(1),r()),s&2){let e=n.$implicit;m("value",e.id),l(),v(e.nombre)}}function _t(s,n){if(s&1&&(i(0,"option",93),a(1),r()),s&2){let e=n.$implicit;m("value",e.url),l(),C(" ",e.filename," ")}}function St(s,n){if(s&1&&(i(0,"div",94),f(1,"img",95),r()),s&2){let e=u(2);l(),m("src",e.getImagePreview(e.tallerAEditar.imagenTaller),y)}}function vt(s,n){if(s&1&&(i(0,"option",93),a(1),r()),s&2){let e=n.$implicit;m("value",e.url),l(),C(" ",e.filename," ")}}function xt(s,n){if(s&1&&(i(0,"div",94),f(1,"img",95),r()),s&2){let e=u(2);l(),m("src",e.getImagePreview(e.tallerAEditar.imagenInicio),y)}}function Ct(s,n){if(s&1){let e=x();i(0,"form",22,2),S("ngSubmit",function(){g(e);let o=u();return p(o.guardarCambiosTaller())}),i(2,"h5",107),a(3,"2. Opciones para Editar"),r(),i(4,"div",23)(5,"div",108)(6,"div",9)(7,"label",109),a(8,"Nombre del Taller"),r(),i(9,"input",110),E("ngModelChange",function(o){g(e);let d=u();return h(d.tallerAEditar.nombre,o)||(d.tallerAEditar.nombre=o),p(o)}),r()(),i(10,"div",9)(11,"label",111),a(12,"Descripci\xF3n"),r(),i(13,"textarea",112),E("ngModelChange",function(o){g(e);let d=u();return h(d.tallerAEditar.descripcion,o)||(d.tallerAEditar.descripcion=o),p(o)}),r()(),i(14,"div",23)(15,"div",24)(16,"label",113),a(17,"Duraci\xF3n (Semanas)"),r(),i(18,"input",114),E("ngModelChange",function(o){g(e);let d=u();return h(d.tallerAEditar.duracionSemanas,o)||(d.tallerAEditar.duracionSemanas=o),p(o)}),r()(),i(19,"div",24)(20,"label",115),a(21,"Clases por Semana"),r(),i(22,"input",116),E("ngModelChange",function(o){g(e);let d=u();return h(d.tallerAEditar.clasesPorSemana,o)||(d.tallerAEditar.clasesPorSemana=o),p(o)}),r()()(),i(23,"div",9)(24,"label",117),a(25,"Precio Base (S/)"),r(),i(26,"input",118),E("ngModelChange",function(o){g(e);let d=u();return h(d.tallerAEditar.precio,o)||(d.tallerAEditar.precio=o),p(o)}),r()(),i(27,"div",9)(28,"label",119),a(29,"Temas del Taller"),r(),i(30,"textarea",120),E("ngModelChange",function(o){g(e);let d=u();return h(d.tallerAEditar.temas,o)||(d.tallerAEditar.temas=o),p(o)}),r()()(),i(31,"div",108)(32,"div",9)(33,"label",121),a(34,"Imagen Taller (Detalle)"),r(),i(35,"select",122),E("ngModelChange",function(o){g(e);let d=u();return h(d.tallerAEditar.imagenTaller,o)||(d.tallerAEditar.imagenTaller=o),p(o)}),i(36,"option",38),a(37,"-- Seleccionar imagen --"),r(),_(38,_t,2,2,"option",39),r(),_(39,St,2,1,"div",40),r(),i(40,"div",9)(41,"label",123),a(42,"Imagen Inicio (Principal)"),r(),i(43,"select",124),E("ngModelChange",function(o){g(e);let d=u();return h(d.tallerAEditar.imagenInicio,o)||(d.tallerAEditar.imagenInicio=o),p(o)}),i(44,"option",38),a(45,"-- Seleccionar imagen --"),r(),_(46,vt,2,2,"option",39),r(),_(47,xt,2,1,"div",40),r(),i(48,"div",125)(49,"input",126),E("ngModelChange",function(o){g(e);let d=u();return h(d.tallerAEditar.activo,o)||(d.tallerAEditar.activo=o),p(o)}),r(),i(50,"label",127)(51,"strong"),a(52,"Taller Activo / Disponible"),r(),i(53,"small",128),a(54,"(Desmarcar para dar de baja)"),r()()(),i(55,"div",129)(56,"button",130),f(57,"i",131),a(58," Guardar Cambios del Taller "),r()()()()()}if(s&2){let e=A(1),t=u();l(9),b("ngModel",t.tallerAEditar.nombre),l(4),b("ngModel",t.tallerAEditar.descripcion),l(5),b("ngModel",t.tallerAEditar.duracionSemanas),l(4),b("ngModel",t.tallerAEditar.clasesPorSemana),l(4),b("ngModel",t.tallerAEditar.precio),l(4),b("ngModel",t.tallerAEditar.temas),l(5),b("ngModel",t.tallerAEditar.imagenTaller),l(3),m("ngForOf",t.imagenesDisponibles),l(),m("ngIf",t.tallerAEditar.imagenTaller),l(4),b("ngModel",t.tallerAEditar.imagenInicio),l(3),m("ngForOf",t.imagenesDisponibles),l(),m("ngIf",t.tallerAEditar.imagenInicio),l(2),b("ngModel",t.tallerAEditar.activo),l(7),m("disabled",e.invalid)}}function Tt(s,n){if(s&1&&(i(0,"option",93),a(1),r()),s&2){let e=n.$implicit;m("value",e.id),l(),v(e.nombre)}}function yt(s,n){if(s&1&&(i(0,"option",93),a(1),r()),s&2){let e=n.$implicit;m("value",e.id),l(),K(" ",e.diasDeClase," | ",e.horaInicio," a ",e.horaFin," (",(e.profesor==null?null:e.profesor.nombreCompleto)||"Sin Profesor",") ")}}function At(s,n){if(s&1&&(i(0,"option",135),a(1),r()),s&2){let e=n.$implicit;m("ngValue",e),l(),C("",e.nombreCompleto," ")}}function Mt(s,n){if(s&1&&(i(0,"span",102),a(1),r()),s&2){let e=u(2);l(),C(" Selecciona ",e.maxClasesPorSemanaEdit," d\xEDas ")}}function wt(s,n){if(s&1){let e=x();i(0,"div",103)(1,"input",104),S("change",function(){let o=g(e).$implicit,d=u(2);return p(d.toggleDiaEdit(o))}),r(),i(2,"label",105),a(3),r()()}if(s&2){let e=n.$implicit,t=u(2);l(),m("id","edit_dia_"+e)("checked",t.isDiaSelectedEdit(e))("disabled",!t.isDiaSelectedEdit(e)&&t.diasDeClaseEdit.length>=t.maxClasesPorSemanaEdit),l(),m("for","edit_dia_"+e),l(),v(e)}}function Pt(s,n){if(s&1&&(i(0,"div",106),a(1),r()),s&2){let e=u(2);l(),C(" Debes seleccionar exactamente ",e.maxClasesPorSemanaEdit," d\xEDas. ")}}function It(s,n){if(s&1){let e=x();i(0,"form",22,3),S("ngSubmit",function(){g(e);let o=u();return p(o.guardarCambiosHorario())}),i(2,"h5",107),a(3,"3. Opciones para Editar"),r(),i(4,"div",23)(5,"div",132)(6,"label",133),a(7,"Profesor Asignado"),r(),i(8,"select",134),E("ngModelChange",function(o){g(e);let d=u();return h(d.horarioAEditar.profesor,o)||(d.horarioAEditar.profesor=o),p(o)}),i(9,"option",135),a(10,"-- Seleccionar Profesor --"),r(),_(11,At,2,2,"option",136),r()()(),i(12,"div",23)(13,"div",132)(14,"label",98),a(15," D\xEDa(s) de la Semana * "),_(16,Mt,2,1,"span",99),r(),_(17,wt,4,5,"div",100)(18,Pt,2,1,"div",101),r(),i(19,"div",24)(20,"label",137),a(21,"Vacantes M\xE1ximas"),r(),i(22,"input",138),E("ngModelChange",function(o){g(e);let d=u();return h(d.horarioAEditar.vacantesDisponibles,o)||(d.horarioAEditar.vacantesDisponibles=o),p(o)}),r()()(),i(23,"div",23)(24,"div",24)(25,"label",139),a(26,"Hora de Inicio (HH:MM)"),r(),i(27,"input",140),E("ngModelChange",function(o){g(e);let d=u();return h(d.horarioAEditar.horaInicio,o)||(d.horarioAEditar.horaInicio=o),p(o)}),r()(),i(28,"div",24)(29,"label",141),a(30,"Hora de Fin (HH:MM)"),r(),i(31,"input",142),E("ngModelChange",function(o){g(e);let d=u();return h(d.horarioAEditar.horaFin,o)||(d.horarioAEditar.horaFin=o),p(o)}),r()()(),i(32,"div",23)(33,"div",24)(34,"label",143),a(35,"Fecha de Inicio"),r(),i(36,"input",144),E("ngModelChange",function(o){g(e);let d=u();return h(d.horarioAEditar.fechaInicio,o)||(d.horarioAEditar.fechaInicio=o),p(o)}),S("change",function(){g(e);let o=u();return p(o.actualizarFechaFin())}),r()(),i(37,"div",24)(38,"label",145),a(39,"Fecha de Fin (Calculada)"),r(),i(40,"input",146),E("ngModelChange",function(o){g(e);let d=u();return h(d.horarioAEditar.fechaFin,o)||(d.horarioAEditar.fechaFin=o),p(o)}),r()()(),i(41,"div",129)(42,"button",147),f(43,"i",131),a(44," Guardar Cambios del Horario "),r()()()}if(s&2){let e=A(1),t=u();l(8),b("ngModel",t.horarioAEditar.profesor),l(),m("ngValue",null),l(2),m("ngForOf",t.profesores),l(5),m("ngIf",t.maxClasesPorSemanaEdit>0),l(),m("ngForOf",t.diasSemana),l(),m("ngIf",t.diasDeClaseEdit.length!==t.maxClasesPorSemanaEdit&&t.maxClasesPorSemanaEdit>0),l(4),b("ngModel",t.horarioAEditar.vacantesDisponibles),l(5),b("ngModel",t.horarioAEditar.horaInicio),l(4),b("ngModel",t.horarioAEditar.horaFin),l(5),b("ngModel",t.horarioAEditar.fechaInicio),l(4),b("ngModel",t.horarioAEditar.fechaFin),l(2),m("disabled",e.invalid)}}function Rt(s,n){s&1&&(i(0,"span",163),a(1,"(comenzado)"),r())}function Lt(s,n){s&1&&(i(0,"span",164),a(1,"(por iniciar)"),r())}function Ot(s,n){if(s&1){let e=x();i(0,"tr")(1,"td"),a(2),r(),i(3,"td"),a(4),r(),i(5,"td"),a(6),r(),i(7,"td"),a(8),r(),i(9,"td"),a(10),r(),i(11,"td")(12,"span"),a(13),r(),_(14,Rt,2,0,"span",159)(15,Lt,2,0,"span",160),r(),i(16,"td"),a(17),r(),i(18,"td")(19,"button",161),S("click",function(){let o=g(e).$implicit,d=u(2);return p(d.eliminarHorario(o.id))}),f(20,"i",162),a(21," Eliminar "),r()()()}if(s&2){let e=n.$implicit,t=u(2);l(2),v(e.id),l(2),v((e.profesor==null?null:e.profesor.nombreCompleto)||"Sin Asignar"),l(2),v(e.diasDeClase),l(2),ce("",e.horaInicio," - ",e.horaFin),l(2),v(e.vacantesDisponibles),l(3),v(e.fechaInicio),l(),m("ngIf",e.fechaInicio<=t.today),l(),m("ngIf",e.fechaInicio>t.today),l(2),v(e.fechaFin)}}function Dt(s,n){s&1&&(i(0,"tr")(1,"td",165),a(2,"No hay horarios activos para este taller"),r()())}function Nt(s,n){if(s&1&&(i(0,"tr")(1,"td"),a(2),r(),i(3,"td"),a(4),r(),i(5,"td"),a(6),r(),i(7,"td"),a(8),r(),i(9,"td"),a(10),r(),i(11,"td"),a(12),r(),i(13,"td")(14,"span",170),a(15,"Finalizado"),r()()()),s&2){let e=n.$implicit;l(2),v(e.id),l(2),v((e.profesor==null?null:e.profesor.nombreCompleto)||"Sin Asignar"),l(2),v(e.diasDeClase),l(2),ce("",e.horaInicio," - ",e.horaFin),l(2),v(e.fechaInicio),l(2),v(e.fechaFin)}}function Vt(s,n){if(s&1&&(i(0,"div",166)(1,"h6",167),f(2,"i",168),a(3," Horarios Finalizados"),r(),i(4,"table",169)(5,"thead",155)(6,"tr")(7,"th"),a(8,"ID"),r(),i(9,"th"),a(10,"Profesor"),r(),i(11,"th"),a(12,"D\xEDas"),r(),i(13,"th"),a(14,"Horario"),r(),i(15,"th"),a(16,"Inicio"),r(),i(17,"th"),a(18,"Fin"),r(),i(19,"th"),a(20,"Estado"),r()()(),i(21,"tbody"),_(22,Nt,16,7,"tr",156),r()()()),s&2){let e=u().$implicit,t=u();l(22),m("ngForOf",t.getHorariosFinalizados(e))}}function Ft(s,n){if(s&1&&(i(0,"div",148)(1,"h2",149)(2,"button",150)(3,"strong"),a(4),r(),i(5,"span",151),a(6),r()()(),i(7,"div",152)(8,"div",153)(9,"table",154)(10,"thead",155)(11,"tr")(12,"th"),a(13,"ID Horario"),r(),i(14,"th"),a(15,"Profesor"),r(),i(16,"th"),a(17,"D\xEDa(s)"),r(),i(18,"th"),a(19,"Hora"),r(),i(20,"th"),a(21,"Vacantes"),r(),i(22,"th"),a(23,"Fecha de inicio"),r(),i(24,"th"),a(25,"Fecha de Fin"),r(),i(26,"th"),a(27,"Acciones"),r()()(),i(28,"tbody"),_(29,Ot,22,10,"tr",156)(30,Dt,3,0,"tr",157),r()(),_(31,Vt,23,1,"div",158),r()()()),s&2){let e=n.$implicit,t=n.first,o=u();l(),m("id","heading"+e.id),l(),L("collapsed",!t),ae("data-bs-target","#collapse"+e.id)("aria-expanded",t)("aria-controls","collapse"+e.id),l(2),v(e.nombre),l(),L("bg-success",e.activo)("bg-secondary",!e.activo),l(),C(" ",e.activo?"Activo":"Inactivo"," "),l(),L("show",t),m("id","collapse"+e.id),ae("aria-labelledby","heading"+e.id),l(22),m("ngForOf",o.getHorariosActivos(e)),l(),m("ngIf",o.getHorariosActivos(e).length===0),l(),m("ngIf",o.getHorariosFinalizados(e).length>0)}}var ne=class s{constructor(n){this.adminService=n}talleres=[];talleresActivos=[];profesores=[];diasSemana=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"];today=new Date().toISOString().split("T")[0];imagenesDisponibles=[];nuevoTaller={nombre:"",descripcion:"",duracionSemanas:0,clasesPorSemana:0,precio:0,imagenTaller:"",imagenInicio:"",temas:""};nuevoHorario={tallerId:"",profesorId:"",diasDeClase:[],horaInicio:"",horaFin:"",fechaInicio:"",vacantesDisponibles:0};tallerAEditar=null;tallerParaEditarId="";editFormTallerVisible=!1;tallerParaHorarioEditar="";horarioAEditar=null;horarioAEditarId="";horariosDelTaller=[];editFormHorarioVisible=!1;successMessage="";errorMessage="";uploadingNewImage=!1;maxClasesPorSemana=0;maxClasesPorSemanaEdit=0;diasDeClaseEdit=[];ngOnInit(){this.cargarImagenesDisponibles(),this.cargarProfesores()}cargarProfesores(){console.log("\u{1F535} [TALLERES ANGULAR] Cargando profesores..."),this.adminService.getProfesores().subscribe({next:n=>{this.profesores=n,console.log("\u2705 [TALLERES ANGULAR] Profesores cargados:",this.profesores.length),this.cargarTalleres()},error:n=>{console.error("\u274C [TALLERES ANGULAR] Error al cargar profesores:",n),this.cargarTalleres()}})}cargarTalleres(){console.log("\u{1F535} [TALLERES ANGULAR] Cargando talleres..."),this.adminService.getTalleres().subscribe({next:n=>{this.talleres=n,this.talleresActivos=this.talleres.filter(e=>e.activo),console.log("\u2705 [TALLERES ANGULAR] Talleres cargados:",this.talleres.length)},error:n=>{console.error("\u274C [TALLERES ANGULAR] Error al cargar talleres:",n)}})}cargarImagenesDisponibles(){console.log("\u{1F535} [TALLERES ANGULAR] Cargando lista de im\xE1genes disponibles..."),this.adminService.getImagesList().subscribe({next:n=>{n.success&&n.images&&(this.imagenesDisponibles=n.images,console.log("\u2705 [TALLERES ANGULAR] Im\xE1genes disponibles:",this.imagenesDisponibles.length))},error:n=>{console.error("\u274C [TALLERES ANGULAR] Error al cargar lista de im\xE1genes:",n)}})}triggerFileUpload(){let n=document.getElementById("uploadImageFile");n&&n.click()}onUploadNewImage(n){let e=n.target.files[0];if(!e)return;if(console.log("\u{1F535} [TALLERES ANGULAR] Subiendo nueva imagen:",e.name),e.size>5*1024*1024){this.errorMessage="La imagen no debe superar los 5MB";return}if(!e.type.startsWith("image/")){this.errorMessage="Solo se permiten archivos de imagen";return}this.uploadingNewImage=!0;let t=new FormData;t.append("file",e),this.adminService.uploadImage(t).subscribe({next:o=>{console.log("\u2705 [TALLERES ANGULAR] Imagen subida exitosamente:",o),this.successMessage=`Imagen "${o.filename}" subida exitosamente`,this.cargarImagenesDisponibles(),this.uploadingNewImage=!1;let d=document.getElementById("uploadImageFile");d&&(d.value=""),setTimeout(()=>{this.successMessage=""},3e3)},error:o=>{console.error("\u274C [TALLERES ANGULAR] Error al subir imagen:",o),this.errorMessage=o.error?.message||"Error al subir la imagen",this.uploadingNewImage=!1}})}registrarTaller(){if(console.log("\u{1F535} [TALLERES ANGULAR] Registrando nuevo taller:",this.nuevoTaller.nombre),!this.nuevoTaller.nombre||this.nuevoTaller.nombre.trim()===""){this.errorMessage="El nombre del taller es obligatorio",console.warn("\u26A0\uFE0F [TALLERES ANGULAR] Nombre vac\xEDo");return}if(!this.nuevoTaller.descripcion||this.nuevoTaller.descripcion.trim()===""){this.errorMessage="La descripci\xF3n del taller es obligatoria",console.warn("\u26A0\uFE0F [TALLERES ANGULAR] Descripci\xF3n vac\xEDa");return}if(!this.nuevoTaller.imagenTaller||!this.nuevoTaller.imagenInicio){this.errorMessage="Debes seleccionar ambas im\xE1genes",console.warn("\u26A0\uFE0F [TALLERES ANGULAR] Im\xE1genes no seleccionadas");return}let n=Number(this.nuevoTaller.duracionSemanas),e=Number(this.nuevoTaller.clasesPorSemana),t=Number(this.nuevoTaller.precio);if(isNaN(n)||n<=0){this.errorMessage="La duraci\xF3n debe ser un n\xFAmero mayor a 0",console.warn("\u26A0\uFE0F [TALLERES ANGULAR] Duraci\xF3n inv\xE1lida:",n);return}if(isNaN(e)||e<=0){this.errorMessage="Las clases por semana deben ser un n\xFAmero mayor a 0",console.warn("\u26A0\uFE0F [TALLERES ANGULAR] Clases por semana inv\xE1lida:",e);return}if(isNaN(t)||t<0){this.errorMessage="El precio debe ser un n\xFAmero v\xE1lido mayor o igual a 0",console.warn("\u26A0\uFE0F [TALLERES ANGULAR] Precio inv\xE1lido:",t);return}let o={nombre:this.nuevoTaller.nombre.trim(),descripcion:this.nuevoTaller.descripcion.trim(),duracionSemanas:n,clasesPorSemana:e,precio:t,imagenTaller:this.nuevoTaller.imagenTaller,imagenInicio:this.nuevoTaller.imagenInicio,temas:this.nuevoTaller.temas||"",activo:!0};console.log("\u{1F4E4} [TALLERES ANGULAR] Enviando payload:",o),console.log("\u{1F50D} [TALLERES ANGULAR] Tipos de datos:"),console.log("   - nombre:",typeof o.nombre,"|",o.nombre),console.log("   - duracionSemanas:",typeof o.duracionSemanas,"|",o.duracionSemanas),console.log("   - clasesPorSemana:",typeof o.clasesPorSemana,"|",o.clasesPorSemana),console.log("   - precio:",typeof o.precio,"|",o.precio),console.log("   - activo:",typeof o.activo,"|",o.activo),this.adminService.createTaller(o).subscribe({next:d=>{console.log("\u2705 [TALLERES ANGULAR SUCCESS] Taller registrado:",d),this.successMessage=`Taller "${this.nuevoTaller.nombre}" registrado exitosamente`,this.resetNuevoTaller(),this.cargarTalleres(),setTimeout(()=>{this.successMessage=""},5e3)},error:d=>{console.error("\u274C [TALLERES ANGULAR ERROR] Error al registrar taller:",d),console.error("\u274C [TALLERES ANGULAR ERROR] Status:",d.status),console.error("\u274C [TALLERES ANGULAR ERROR] Detalles:",d.error),this.errorMessage=d.error?.message||"Error al registrar el taller"}})}resetNuevoTaller(){this.nuevoTaller={nombre:"",descripcion:"",duracionSemanas:0,clasesPorSemana:0,precio:0,imagenTaller:"",imagenInicio:"",temas:""}}onTallerSeleccionadoForHorario(n){if(this.nuevoHorario.tallerId=n,this.nuevoHorario.diasDeClase=[],!n){this.maxClasesPorSemana=0;return}let e=this.talleres.find(t=>t.id==Number(n));e&&(this.maxClasesPorSemana=e.clasesPorSemana,console.log(`\u{1F535} [TALLERES ANGULAR] Taller seleccionado: ${e.nombre}, Clases/Semana: ${this.maxClasesPorSemana}`))}registrarHorario(){if(console.log("\u{1F535} [TALLERES ANGULAR] Registrando nuevo horario para taller:",this.nuevoHorario.tallerId),!this.nuevoHorario.tallerId||!this.nuevoHorario.profesorId||this.nuevoHorario.diasDeClase.length===0||!this.nuevoHorario.horaInicio||!this.nuevoHorario.horaFin){this.errorMessage="Por favor completa todos los campos del horario",console.warn("\u26A0\uFE0F [TALLERES ANGULAR] Datos de horario incompletos");return}if(this.nuevoHorario.diasDeClase.length!==this.maxClasesPorSemana){this.errorMessage=`Debes seleccionar exactamente ${this.maxClasesPorSemana} d\xEDas de clase`;return}let n=new me().set("tallerId",this.nuevoHorario.tallerId).set("profesorId",this.nuevoHorario.profesorId).set("diasDeClase",this.nuevoHorario.diasDeClase.join(", ")).set("horaInicio",this.nuevoHorario.horaInicio).set("horaFin",this.nuevoHorario.horaFin).set("fechaInicio",this.nuevoHorario.fechaInicio).set("vacantesDisponibles",this.nuevoHorario.vacantesDisponibles.toString());console.log("\u{1F4E4} [TALLERES ANGULAR] Enviando params:",n.toString()),this.adminService.createHorario(n).subscribe({next:e=>{console.log("\u2705 [TALLERES ANGULAR SUCCESS] Horario registrado:",e),this.successMessage="Horario a\xF1adido exitosamente",this.resetNuevoHorario(),this.cargarTalleres(),setTimeout(()=>{this.successMessage=""},5e3)},error:e=>{console.error("\u274C [TALLERES ANGULAR ERROR] Error al registrar horario:",e),console.error("\u274C [TALLERES ANGULAR ERROR] Detalles:",e.error),this.errorMessage=e.error?.message||"Error al registrar el horario"}})}resetNuevoHorario(){this.nuevoHorario={tallerId:"",profesorId:"",diasDeClase:[],horaInicio:"",horaFin:"",fechaInicio:"",vacantesDisponibles:0},this.maxClasesPorSemana=0}toggleDia(n){this.nuevoHorario.diasDeClase.includes(n)?this.nuevoHorario.diasDeClase=this.nuevoHorario.diasDeClase.filter(e=>e!==n):this.nuevoHorario.diasDeClase.length<this.maxClasesPorSemana&&this.nuevoHorario.diasDeClase.push(n),console.log("\u{1F504} [TALLERES ANGULAR] D\xEDas seleccionados:",this.nuevoHorario.diasDeClase)}isDiaSelected(n){return this.nuevoHorario.diasDeClase.includes(n)}onTallerAEditarChange(n){if(console.log("\u{1F535} [TALLERES ANGULAR] Seleccionando taller para editar:",n),!n){this.editFormTallerVisible=!1,this.tallerAEditar=null;return}let e=this.talleresActivos.find(t=>t.id==Number(n));e&&(this.tallerAEditar=R({},e),this.editFormTallerVisible=!0,console.log("\u{1F4DD} [TALLERES ANGULAR] Taller cargado para edici\xF3n:",this.tallerAEditar.nombre))}guardarCambiosTaller(){if(console.log("\u{1F535} [TALLERES ANGULAR] Guardando cambios del taller:",this.tallerAEditar?.id),!this.tallerAEditar)return;if(!this.tallerAEditar.nombre||this.tallerAEditar.nombre.trim()===""){this.errorMessage="El nombre del taller es obligatorio";return}if(!this.tallerAEditar.descripcion||this.tallerAEditar.descripcion.trim()===""){this.errorMessage="La descripci\xF3n es obligatoria";return}let n={id:this.tallerAEditar.id,nombre:this.tallerAEditar.nombre.trim(),descripcion:this.tallerAEditar.descripcion.trim(),duracionSemanas:Number(this.tallerAEditar.duracionSemanas),clasesPorSemana:Number(this.tallerAEditar.clasesPorSemana),precio:Number(this.tallerAEditar.precio),imagenTaller:this.tallerAEditar.imagenTaller,imagenInicio:this.tallerAEditar.imagenInicio,temas:this.tallerAEditar.temas||"",activo:this.tallerAEditar.activo};console.log("\u{1F4E4} [TALLERES ANGULAR] Enviando payload de actualizaci\xF3n:",n),this.adminService.updateTaller(this.tallerAEditar.id,n).subscribe({next:e=>{console.log("\u2705 [TALLERES ANGULAR SUCCESS] Taller actualizado:",e),this.successMessage=`Taller "${this.tallerAEditar.nombre}" actualizado`,this.tallerAEditar=null,this.editFormTallerVisible=!1,this.cargarTalleres(),setTimeout(()=>{this.successMessage=""},5e3)},error:e=>{console.error("\u274C [TALLERES ANGULAR ERROR] Error al actualizar taller:",e),console.error("\u274C [TALLERES ANGULAR ERROR] Status:",e.status),console.error("\u274C [TALLERES ANGULAR ERROR] Detalles:",e.error),this.errorMessage=e.error?.message||"Error al actualizar el taller"}})}onTallerParaHorarioChange(n){if(console.log("\u{1F535} [TALLERES ANGULAR] Cargando horarios del taller:",n),!n){this.horariosDelTaller=[],this.horarioAEditar=null,this.editFormHorarioVisible=!1,this.maxClasesPorSemanaEdit=0;return}let e=this.talleres.find(t=>t.id==Number(n));e?(this.horariosDelTaller=e.horarios,this.maxClasesPorSemanaEdit=e.clasesPorSemana):(this.horariosDelTaller=[],this.maxClasesPorSemanaEdit=0),this.horarioAEditar=null,this.editFormHorarioVisible=!1,console.log("\u{1F4CA} [TALLERES ANGULAR] Horarios cargados:",this.horariosDelTaller.length)}onHorarioAEditarChange(n){if(console.log("\u{1F535} [TALLERES ANGULAR] Seleccionando horario para editar:",n),!n){this.editFormHorarioVisible=!1,this.horarioAEditar=null,this.diasDeClaseEdit=[];return}let e=this.horariosDelTaller.find(t=>t.id==Number(n));e&&(this.horarioAEditar=R({},e),this.diasDeClaseEdit=this.horarioAEditar.diasDeClase?this.horarioAEditar.diasDeClase.split(",").map(t=>t.trim()):[],this.editFormHorarioVisible=!0,console.log("\u{1F4DD} [TALLERES ANGULAR] Horario cargado para edici\xF3n:",this.horarioAEditar.id),console.log("\u{1F4DD} [TALLERES ANGULAR] D\xEDas actuales:",this.diasDeClaseEdit))}toggleDiaEdit(n){this.diasDeClaseEdit.includes(n)?this.diasDeClaseEdit=this.diasDeClaseEdit.filter(e=>e!==n):this.diasDeClaseEdit.length<this.maxClasesPorSemanaEdit&&this.diasDeClaseEdit.push(n),console.log("\u{1F504} [TALLERES ANGULAR] D\xEDas editados seleccionados:",this.diasDeClaseEdit)}isDiaSelectedEdit(n){return this.diasDeClaseEdit.includes(n)}actualizarFechaFin(){if(!this.horarioAEditar||!this.horarioAEditar.fechaInicio||!this.tallerParaHorarioEditar)return;let n=this.talleres.find(Pe=>Pe.id==Number(this.tallerParaHorarioEditar));if(!n)return;let e=this.horarioAEditar.fechaInicio.split("-"),t=new Date(Number(e[0]),Number(e[1])-1,Number(e[2])),o=n.duracionSemanas*7;t.setDate(t.getDate()+o);let d=t.getFullYear(),c=(t.getMonth()+1).toString().padStart(2,"0"),we=t.getDate().toString().padStart(2,"0");this.horarioAEditar.fechaFin=`${d}-${c}-${we}`,console.log("\u{1F504} [TALLERES ANGULAR] Fecha fin recalculada:",this.horarioAEditar.fechaFin)}guardarCambiosHorario(){if(console.log("\u{1F535} [TALLERES ANGULAR] Guardando cambios del horario:",this.horarioAEditar?.id),!this.horarioAEditar||!this.horarioAEditar.profesor){this.errorMessage="Debe seleccionar un profesor";return}if(this.diasDeClaseEdit.length!==this.maxClasesPorSemanaEdit){this.errorMessage=`Debes seleccionar exactamente ${this.maxClasesPorSemanaEdit} d\xEDas de clase`;return}this.horarioAEditar.diasDeClase=this.diasDeClaseEdit.join(", ");let n=new me().set("profesorId",this.horarioAEditar.profesor.id.toString()).set("diasDeClase",this.horarioAEditar.diasDeClase).set("horaInicio",this.horarioAEditar.horaInicio).set("horaFin",this.horarioAEditar.horaFin).set("fechaInicio",this.horarioAEditar.fechaInicio).set("vacantesDisponibles",this.horarioAEditar.vacantesDisponibles.toString()).set("fechaFin",this.horarioAEditar.fechaFin||"");console.log("\u{1F4E4} [TALLERES ANGULAR] Enviando actualizaci\xF3n de horario:",n.toString()),this.adminService.updateHorario(this.horarioAEditar.id,n).subscribe({next:e=>{console.log("\u2705 [TALLERES ANGULAR SUCCESS] Horario actualizado:",e),this.successMessage="Horario actualizado exitosamente",this.horarioAEditar=null,this.editFormHorarioVisible=!1,this.cargarTalleres(),setTimeout(()=>{this.successMessage=""},5e3)},error:e=>{console.error("\u274C [TALLERES ANGULAR ERROR] Error al actualizar horario:",e),console.error("\u274C [TALLERES ANGULAR ERROR] Detalles:",e.error),this.errorMessage=e.error?.message||"Error al actualizar el horario"}})}eliminarHorario(n){console.log("\u{1F535} [TALLERES ANGULAR] Confirmando eliminaci\xF3n de horario:",n),confirm(`\xBFConfirmas que deseas ELIMINAR permanentemente el horario con ID ${n}?`)?(console.log("\u{1F4E4} [TALLERES ANGULAR] Eliminando horario:",n),this.adminService.deleteHorario(n).subscribe({next:e=>{console.log("\u2705 [TALLERES ANGULAR SUCCESS] Horario eliminado:",e),this.successMessage="Horario eliminado exitosamente",this.horariosDelTaller=this.horariosDelTaller.filter(t=>t.id!==n),this.cargarTalleres(),setTimeout(()=>{this.successMessage=""},5e3)},error:e=>{console.error("\u274C [TALLERES ANGULAR ERROR] Error al eliminar horario:",e),this.errorMessage=e.error?.message||"Error al eliminar el horario"}})):console.log("\u26A0\uFE0F [TALLERES ANGULAR] Eliminaci\xF3n cancelada")}getImagePreview(n){return n?n.startsWith("http://")||n.startsWith("https://")?n:`http://localhost:8080${n}`:""}getHorariosActivos(n){return n.horarios.filter(e=>!e.finalizado)}getHorariosFinalizados(n){return n.horarios.filter(e=>e.finalizado)}static \u0275fac=function(e){return new(e||s)(O(I))};static \u0275cmp=M({type:s,selectors:[["app-talleres"]],decls:163,vars:40,consts:[["tallerForm","ngForm"],["horarioForm","ngForm"],["editTallerForm","ngForm"],["editHorarioForm","ngForm"],[1,"main-content"],[1,"mb-4","text-harmony-title"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"mb-4","p-3","border","rounded","bg-light"],[1,"mb-3"],[1,"bi","bi-cloud-upload","me-2"],[1,"row","align-items-end"],[1,"col-md-8"],["type","file","id","uploadImageFile","accept","image/*",1,"form-control",3,"change","disabled"],[1,"col-md-4"],[1,"btn","btn-primary","w-100",3,"click","disabled"],[1,"bi","bi-upload","me-2"],[1,"text-muted","mt-2","d-block"],[1,"bi","bi-info-circle"],["id","nuevo-taller",1,"mb-5","p-4","border","rounded","shadow-sm","bg-white"],[1,"text-harmony-title","mb-4"],[1,"bi","bi-plus-circle","me-2"],[3,"ngSubmit"],[1,"row"],[1,"col-md-6","mb-3"],["for","nombreTaller",1,"form-label"],["type","text","id","nombreTaller","name","nombre","required","","placeholder","Ej. Piano B\xE1sico",1,"form-control",3,"ngModelChange","ngModel"],["for","descripcionTaller",1,"form-label"],["id","descripcionTaller","name","descripcion","rows","1","required","","placeholder","Breve descripci\xF3n...",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4","mb-3"],["for","duracionSemanas",1,"form-label"],["type","number","id","duracionSemanas","name","duracionSemanas","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","clasesPorSemana",1,"form-label"],["type","number","id","clasesPorSemana","name","clasesPorSemana","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","precioTaller",1,"form-label"],["type","number","id","precioTaller","name","precio","step","0.01","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","imagenTallerSelect",1,"form-label"],["id","imagenTallerSelect","name","imagenTaller","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["for","imagenInicioSelect",1,"form-label"],["id","imagenInicioSelect","name","imagenInicio","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"mb-3","p-3","bg-light","border","rounded"],[1,"form-label","fw-bold","text-secondary"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"bi","bi-cloud-upload","me-1"],["class","text-muted small",4,"ngIf"],["type","file","id","uploadImageFile","accept","image/*",1,"d-none",3,"change"],["for","temasTaller",1,"form-label"],["id","temasTaller","name","temas","rows","2",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-grid"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"bi","bi-save","me-2"],["id","nuevo-horario",1,"mb-5","p-4","border","rounded","shadow-sm","bg-light-warning"],[1,"bi","bi-calendar-plus","me-2"],["for","tallerSelect",1,"form-label"],["id","tallerSelect","name","tallerId","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","profesorSelect",1,"form-label"],["id","profesorSelect","name","profesorId","required","",1,"form-select",3,"ngModelChange","ngModel"],["class","mb-3",4,"ngIf"],["for","horaInicioHorario",1,"form-label"],["type","time","id","horaInicioHorario","name","horaInicio","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","horaFinHorario",1,"form-label"],["type","time","id","horaFinHorario","name","horaFin","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaInicioHorario",1,"form-label"],["type","date","id","fechaInicioHorario","name","fechaInicio","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","vacantesMaximasHorario",1,"form-label"],["type","number","id","vacantesMaximasHorario","name","vacantesDisponibles","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-grid","mt-4"],["type","submit",1,"btn","btn-warning","btn-lg",3,"disabled"],[1,"bi","bi-calendar-check","me-2"],["id","edicion-taller",1,"mb-5","p-4","border","rounded","shadow-sm","bg-light-info"],[1,"bi","bi-pencil-square","me-2"],["for","tallerAEditar",1,"form-label"],["id","tallerAEditar","name","tallerAEditar",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngSubmit",4,"ngIf"],["id","edicion-horario-seccion",1,"mb-5","p-4","border","rounded","shadow-sm","bg-light-danger"],[1,"bi","bi-calendar-minus","me-2"],["for","tallerParaHorarioEditar",1,"form-label"],["id","tallerParaHorarioEditar","name","tallerParaHorarioEditar",1,"form-select",3,"ngModelChange","change","ngModel"],["for","horarioAEditar",1,"form-label"],["id","horarioAEditar","name","horarioAEditar",1,"form-select",3,"ngModelChange","disabled","ngModel"],["id","listado-talleres-horarios",1,"m-2"],[1,"mb-4"],["id","accordionTalleres",1,"accordion"],["class","accordion-item",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"bi","bi-check-circle-fill","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[3,"value"],[1,"mt-2"],["alt","Preview",1,"img-thumbnail",2,"max-height","120px",3,"src"],[1,"text-muted","small"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"form-label","d-block"],["class","badge bg-info text-dark",4,"ngIf"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],["class","text-danger small mt-1",4,"ngIf"],[1,"badge","bg-info","text-dark"],[1,"form-check","form-check-inline"],["type","checkbox",1,"form-check-input",3,"change","id","checked","disabled"],[1,"form-check-label",3,"for"],[1,"text-danger","small","mt-1"],[1,"mt-4","mb-3","text-secondary"],[1,"col-md-6"],["for","edit-nombreTaller",1,"form-label"],["type","text","id","edit-nombreTaller","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-descripcionTaller",1,"form-label"],["id","edit-descripcionTaller","name","descripcion","rows","3","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-duracionSemanas",1,"form-label"],["type","number","id","edit-duracionSemanas","name","duracionSemanas","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-clasesPorSemana",1,"form-label"],["type","number","id","edit-clasesPorSemana","name","clasesPorSemana","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-precioTaller",1,"form-label"],["type","number","id","edit-precioTaller","name","precio","step","0.01","min","0","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","temasEditar",1,"form-label"],["id","temasEditar","name","temas","rows","4",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-imagenTallerSelect",1,"form-label"],["id","edit-imagenTallerSelect","name","imagenTaller","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","edit-imagenInicioSelect",1,"form-label"],["id","edit-imagenInicioSelect","name","imagenInicio","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"form-check","form-switch","mb-4"],["type","checkbox","id","edit-taller-activo","name","activo",1,"form-check-input",3,"ngModelChange","ngModel"],["for","edit-taller-activo",1,"form-check-label"],[1,"text-muted"],[1,"mt-4"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"bi","bi-save","me-1"],[1,"col-md-12","mb-3"],["for","edit-profesor-seccion",1,"form-label"],["id","edit-profesor-seccion","name","profesor","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","edit-vacantes-seccion",1,"form-label"],["type","number","id","edit-vacantes-seccion","name","vacantesDisponibles","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-hora-inicio-seccion",1,"form-label"],["type","time","id","edit-hora-inicio-seccion","name","horaInicio","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-hora-fin-seccion",1,"form-label"],["type","time","id","edit-hora-fin-seccion","name","horaFin","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","edit-fecha-inicio-seccion",1,"form-label"],["type","date","id","edit-fecha-inicio-seccion","name","fechaInicio","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["for","edit-fecha-fin-seccion",1,"form-label"],["type","date","id","edit-fecha-fin-seccion","name","fechaFin","readonly","",1,"form-control","bg-light",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-danger",3,"disabled"],[1,"accordion-item"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse",1,"accordion-button"],[1,"badge","ms-2"],["data-bs-parent","#accordionTalleres",1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body","p-0"],[1,"table","table-striped","table-hover","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","mt-4 p-3 bg-light border-top",4,"ngIf"],["class","text-danger fw-bold ms-1",4,"ngIf"],["class","text-success fw-bold ms-1",4,"ngIf"],["type","button","title","Eliminar Horario",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash"],[1,"text-danger","fw-bold","ms-1"],[1,"text-success","fw-bold","ms-1"],["colspan","8",1,"text-center","text-muted"],[1,"mt-4","p-3","bg-light","border-top"],[1,"text-secondary","mb-3"],[1,"bi","bi-archive","me-2"],[1,"table","table-sm","table-bordered","text-muted"],[1,"badge","bg-secondary"]],template:function(e,t){if(e&1){let o=x();i(0,"div",4)(1,"h1",5),a(2,"Gesti\xF3n de Talleres y Horarios"),r(),f(3,"hr"),_(4,ot,4,1,"div",6)(5,at,4,1,"div",7),i(6,"section",8)(7,"h5",9),f(8,"i",10),a(9," Subir Nueva Imagen"),r(),i(10,"div",11)(11,"div",12)(12,"input",13),S("change",function(c){return g(o),p(t.onUploadNewImage(c))}),r()(),i(13,"div",14)(14,"button",15),S("click",function(){return g(o),p(t.triggerFileUpload())}),f(15,"i",16),a(16),r()()(),i(17,"small",17),f(18,"i",18),a(19," Las im\xE1genes se guardar\xE1n con su nombre original en el servidor "),r()(),i(20,"section",19)(21,"h3",20),f(22,"i",21),a(23," Registrar Nuevo Taller"),r(),i(24,"form",22,0),S("ngSubmit",function(){return g(o),p(t.registrarTaller())}),i(26,"div",23)(27,"div",24)(28,"label",25),a(29,"Nombre del Taller *"),r(),i(30,"input",26),E("ngModelChange",function(c){return g(o),h(t.nuevoTaller.nombre,c)||(t.nuevoTaller.nombre=c),p(c)}),r()(),i(31,"div",24)(32,"label",27),a(33,"Descripci\xF3n *"),r(),i(34,"textarea",28),E("ngModelChange",function(c){return g(o),h(t.nuevoTaller.descripcion,c)||(t.nuevoTaller.descripcion=c),p(c)}),r()()(),i(35,"div",23)(36,"div",29)(37,"label",30),a(38,"Duraci\xF3n (Semanas) *"),r(),i(39,"input",31),E("ngModelChange",function(c){return g(o),h(t.nuevoTaller.duracionSemanas,c)||(t.nuevoTaller.duracionSemanas=c),p(c)}),r()(),i(40,"div",29)(41,"label",32),a(42,"Clases por Semana *"),r(),i(43,"input",33),E("ngModelChange",function(c){return g(o),h(t.nuevoTaller.clasesPorSemana,c)||(t.nuevoTaller.clasesPorSemana=c),p(c)}),r()(),i(44,"div",29)(45,"label",34),a(46,"Precio Base (S/) *"),r(),i(47,"input",35),E("ngModelChange",function(c){return g(o),h(t.nuevoTaller.precio,c)||(t.nuevoTaller.precio=c),p(c)}),r()()(),i(48,"div",23)(49,"div",24)(50,"label",36),a(51,"Imagen Taller (Detalle) *"),r(),i(52,"select",37),E("ngModelChange",function(c){return g(o),h(t.nuevoTaller.imagenTaller,c)||(t.nuevoTaller.imagenTaller=c),p(c)}),i(53,"option",38),a(54,"-- Seleccionar imagen --"),r(),_(55,lt,2,2,"option",39),r(),_(56,st,2,1,"div",40),r(),i(57,"div",24)(58,"label",41),a(59,"Imagen Inicio (Principal) *"),r(),i(60,"select",42),E("ngModelChange",function(c){return g(o),h(t.nuevoTaller.imagenInicio,c)||(t.nuevoTaller.imagenInicio=c),p(c)}),i(61,"option",38),a(62,"-- Seleccionar imagen --"),r(),_(63,dt,2,2,"option",39),r(),_(64,ct,2,1,"div",40),r()(),i(65,"div",43)(66,"label",44),a(67,"\xBFNo encuentras la imagen?"),r(),i(68,"div",45)(69,"button",46),S("click",function(){return g(o),p(t.triggerFileUpload())}),f(70,"i",47),a(71," Subir Nueva Imagen "),r(),_(72,mt,3,0,"span",48),i(73,"input",49),S("change",function(c){return g(o),p(t.onUploadNewImage(c))}),r()()(),i(74,"div",9)(75,"label",50),a(76,"Temas (Opcional)"),r(),i(77,"textarea",51),E("ngModelChange",function(c){return g(o),h(t.nuevoTaller.temas,c)||(t.nuevoTaller.temas=c),p(c)}),r()(),i(78,"div",52)(79,"button",53),f(80,"i",54),a(81," Registrar Taller "),r()()()(),i(82,"section",55)(83,"h3",20),f(84,"i",56),a(85," A\xF1adir Horario a Taller"),r(),i(86,"form",22,1),S("ngSubmit",function(){return g(o),p(t.registrarHorario())}),i(88,"div",23)(89,"div",24)(90,"label",57),a(91,"Seleccionar Taller *"),r(),i(92,"select",58),E("ngModelChange",function(c){return g(o),h(t.nuevoHorario.tallerId,c)||(t.nuevoHorario.tallerId=c),p(c)}),S("ngModelChange",function(c){return g(o),p(t.onTallerSeleccionadoForHorario(c))}),i(93,"option",38),a(94,"-- Seleccione --"),r(),_(95,gt,2,2,"option",39),r()(),i(96,"div",24)(97,"label",59),a(98,"Profesor *"),r(),i(99,"select",60),E("ngModelChange",function(c){return g(o),h(t.nuevoHorario.profesorId,c)||(t.nuevoHorario.profesorId=c),p(c)}),i(100,"option",38),a(101,"-- Seleccione --"),r(),_(102,pt,2,2,"option",39),r()()(),_(103,ht,6,3,"div",61),i(104,"div",23)(105,"div",29)(106,"label",62),a(107,"Hora de Inicio (HH:MM) *"),r(),i(108,"input",63),E("ngModelChange",function(c){return g(o),h(t.nuevoHorario.horaInicio,c)||(t.nuevoHorario.horaInicio=c),p(c)}),r()(),i(109,"div",29)(110,"label",64),a(111,"Hora de Fin (HH:MM) *"),r(),i(112,"input",65),E("ngModelChange",function(c){return g(o),h(t.nuevoHorario.horaFin,c)||(t.nuevoHorario.horaFin=c),p(c)}),r()(),i(113,"div",29)(114,"label",66),a(115,"Fecha de Inicio *"),r(),i(116,"input",67),E("ngModelChange",function(c){return g(o),h(t.nuevoHorario.fechaInicio,c)||(t.nuevoHorario.fechaInicio=c),p(c)}),r()()(),i(117,"div",9)(118,"label",68),a(119,"Vacantes M\xE1ximas *"),r(),i(120,"input",69),E("ngModelChange",function(c){return g(o),h(t.nuevoHorario.vacantesDisponibles,c)||(t.nuevoHorario.vacantesDisponibles=c),p(c)}),r()(),i(121,"div",70)(122,"button",71),f(123,"i",72),a(124," A\xF1adir Horario "),r()()()(),i(125,"section",73)(126,"h3",20),f(127,"i",74),a(128," Editar Informaci\xF3n del Taller"),r(),i(129,"div",23)(130,"div",24)(131,"label",75),a(132,"1. Seleccionar Taller a Editar (Solo Activos)"),r(),i(133,"select",76),E("ngModelChange",function(c){return g(o),h(t.tallerParaEditarId,c)||(t.tallerParaEditarId=c),p(c)}),S("ngModelChange",function(c){return g(o),p(t.onTallerAEditarChange(c))}),i(134,"option",38),a(135,"-- Seleccione un Taller --"),r(),_(136,Et,2,2,"option",39),r()()(),_(137,Ct,59,14,"form",77),r(),i(138,"section",78)(139,"h3",20),f(140,"i",79),a(141," Editar Horario Espec\xEDfico"),r(),i(142,"div",23)(143,"div",24)(144,"label",80),a(145,"1. Seleccionar Taller"),r(),i(146,"select",81),E("ngModelChange",function(c){return g(o),h(t.tallerParaHorarioEditar,c)||(t.tallerParaHorarioEditar=c),p(c)}),S("change",function(){return g(o),p(t.onTallerParaHorarioChange(t.tallerParaHorarioEditar))}),i(147,"option",38),a(148,"-- Seleccione un Taller --"),r(),_(149,Tt,2,2,"option",39),r()(),i(150,"div",24)(151,"label",82),a(152,"2. Seleccionar Horario"),r(),i(153,"select",83),E("ngModelChange",function(c){return g(o),h(t.horarioAEditarId,c)||(t.horarioAEditarId=c),p(c)}),S("ngModelChange",function(c){return g(o),p(t.onHorarioAEditarChange(c))}),i(154,"option",38),a(155,"-- Seleccione un Horario --"),r(),_(156,yt,2,5,"option",39),r()()(),_(157,It,45,12,"form",77),r(),i(158,"section",84)(159,"h2",85),a(160,"Listado de Talleres y Horarios"),r(),i(161,"div",86),_(162,Ft,32,19,"div",87),r()()()}if(e&2){let o=A(25),d=A(87);l(4),m("ngIf",t.successMessage),l(),m("ngIf",t.errorMessage),l(7),m("disabled",t.uploadingNewImage),l(2),m("disabled",t.uploadingNewImage),l(2),C(" ",t.uploadingNewImage?"Subiendo...":"Subir Imagen"," "),l(14),b("ngModel",t.nuevoTaller.nombre),l(4),b("ngModel",t.nuevoTaller.descripcion),l(5),b("ngModel",t.nuevoTaller.duracionSemanas),l(4),b("ngModel",t.nuevoTaller.clasesPorSemana),l(4),b("ngModel",t.nuevoTaller.precio),l(5),b("ngModel",t.nuevoTaller.imagenTaller),l(3),m("ngForOf",t.imagenesDisponibles),l(),m("ngIf",t.nuevoTaller.imagenTaller),l(4),b("ngModel",t.nuevoTaller.imagenInicio),l(3),m("ngForOf",t.imagenesDisponibles),l(),m("ngIf",t.nuevoTaller.imagenInicio),l(5),m("disabled",t.uploadingNewImage),l(3),m("ngIf",t.uploadingNewImage),l(5),b("ngModel",t.nuevoTaller.temas),l(2),m("disabled",o.invalid),l(13),b("ngModel",t.nuevoHorario.tallerId),l(3),m("ngForOf",t.talleresActivos),l(4),b("ngModel",t.nuevoHorario.profesorId),l(3),m("ngForOf",t.profesores),l(),m("ngIf",t.nuevoHorario.tallerId),l(5),b("ngModel",t.nuevoHorario.horaInicio),l(4),b("ngModel",t.nuevoHorario.horaFin),l(4),b("ngModel",t.nuevoHorario.fechaInicio),l(4),b("ngModel",t.nuevoHorario.vacantesDisponibles),l(2),m("disabled",d.invalid),l(11),b("ngModel",t.tallerParaEditarId),l(3),m("ngForOf",t.talleresActivos),l(),m("ngIf",t.editFormTallerVisible&&t.tallerAEditar),l(9),b("ngModel",t.tallerParaHorarioEditar),l(3),m("ngForOf",t.talleresActivos),l(4),m("disabled",t.horariosDelTaller.length===0),b("ngModel",t.horarioAEditarId),l(3),m("ngForOf",t.horariosDelTaller),l(),m("ngIf",t.editFormHorarioVisible&&t.horarioAEditar),l(5),m("ngForOf",t.talleres)}},dependencies:[P,G,z,q,F,ve,ie,B,U,k,j,xe,H,W,w,N,V],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--dashboard-fondo-general: #f8f9fa;--sidebar-ancho: 250px;--sidebar-fondo: #343a40;--sidebar-texto: rgba(255, 255, 255, .8);--sidebar-hover-fondo: #495057;--sidebar-hover-texto: white;--sidebar-borde: 1px solid #495057;--logout-color: #dc3545;--contenido-fondo: white;--contenido-sombra: 0 4px 12px rgba(0, 0, 0, .1)}body[_ngcontent-%COMP%]{background-color:#f8f9fa}.sidebar[_ngcontent-%COMP%]{width:250px;height:100vh;position:fixed;top:0;left:0;padding-top:20px;background-color:#343a40;color:#fff;z-index:1000}.header-logo-dashboard[_ngcontent-%COMP%]{padding:0 20px 20px;border-bottom:1px solid #495057;margin-bottom:15px}.nav-link-item[_ngcontent-%COMP%]{color:#fffc;padding:15px 20px;text-decoration:none;display:block;transition:background-color .2s,color .2s}.nav-link-item[_ngcontent-%COMP%]:hover, .nav-link-item.active[_ngcontent-%COMP%]{background-color:#495057;color:#fff}.nav-link-logout[_ngcontent-%COMP%]{color:#dc3545}.nav-link-logout[_ngcontent-%COMP%]:hover{background-color:#495057;color:#dc3545}.main-content[_ngcontent-%COMP%]{margin-left:250px;padding:20px}.calendar-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 4px 12px #0000001a}.table-dark[_ngcontent-%COMP%]{--bs-table-bg: #212529;color:#fff}.password-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:30px;box-shadow:0 4px 12px #0000001a}.password-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:10px 15px;border-radius:6px}.btn-confirmar-password[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;font-weight:700;padding:10px 20px;transition:background-color .3s ease}.btn-confirmar-password[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.text-harmony-title[_ngcontent-%COMP%]{color:#5e3ea1!important;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.1)}.main-content[_ngcontent-%COMP%]   h1.text-harmony-title[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem!important}.main-content[_ngcontent-%COMP%]   h2.text-harmony-title[_ngcontent-%COMP%]{font-size:1.8rem;border-bottom:2px solid #724fd2;padding-bottom:5px}.text-harmony-title[_ngcontent-%COMP%]{color:#5e3ea1!important;font-weight:700}.bg-light-purple[_ngcontent-%COMP%]{background-color:#f6f3fb}.taller-header[_ngcontent-%COMP%]{font-weight:700;font-size:1.15rem;color:#5e3ea1;background-color:#e5dbf7}.accordion-body[_ngcontent-%COMP%]{padding:0}.accordion-body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0}.vacantes-count[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:600}']})};var Ut=[{path:"",component:re,children:[{path:"estudiantes",component:J,title:"Harmony - Admin: Estudiantes"},{path:"profesores",component:Y,title:"Harmony - Admin: Profesores"},{path:"talleres",component:ne,title:"Harmony - Admin: Talleres"},{path:"**",redirectTo:"estudiantes"}]}],oe=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=$({type:s});static \u0275inj=Z({imports:[X.forChild(Ut),X]})};var Me=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=$({type:s});static \u0275inj=Z({imports:[w,Y,J,P,oe]})};export{Me as AdminModule};
