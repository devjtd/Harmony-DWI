import{Ea as t,Ta as I,Ya as g,a as s,b as l,m as p,q as d,v as a}from"./chunk-M6627VFI.js";var i="/api/inscripcion",u=class c{http=d(I);router=d(g);cliente=a(null);talleresDisponibles=a([]);datosPago=a(null);pasoActual=a(1);talleresMarcados=t(()=>this.talleresDisponibles().filter(e=>e.seleccionado));talleresSeleccionadosValidos=t(()=>(console.log("[LOG INSCRIPCION-SERVICE] Recalculando talleresSeleccionadosValidos"),this.talleresDisponibles().filter(e=>e.seleccionado).map(e=>{let o=e.horarioSeleccionadoId?e.horarios.find(n=>n.id===e.horarioSeleccionadoId):null;return{id:e.id,nombre:e.nombre,precio:e.precio,seleccionado:e.seleccionado,horarioSeleccionadoId:e.horarioSeleccionadoId,horarioSeleccionado:o}})));totalPagar=t(()=>this.talleresSeleccionadosValidos().reduce((e,o)=>e+(o.horarioSeleccionado?o.precio:0),0));guardarDatosPersonales(e){return console.log("[LOG INSCRIPCION-SERVICE] POST /cliente con datos: ",e),this.http.post(`${i}/cliente`,e)}obtenerTalleres(){return console.log("[LOG INSCRIPCION-SERVICE] GET /talleresDisponibles"),this.http.get(`${i}/talleresDisponibles`)}confirmarInscripcion(e){return console.log("[LOG INSCRIPCION-SERVICE] POST /confirmar con payload: ",e),this.http.post(`${i}/confirmar`,e)}setCliente(e){console.log("[LOG INSCRIPCION-SERVICE] Cliente guardado en signal: ",e),this.cliente.set(e),this.pasoActual.set(2),this.router.navigate(["/inscripcion","talleres",e.id])}setTalleresIniciales(e){console.log("[LOG INSCRIPCION-SERVICE] Talleres iniciales configurados");let o=e.map(n=>l(s({},n),{seleccionado:!1,horarioSeleccionadoId:null}));this.talleresDisponibles.set(o)}toggleTaller(e,o){console.log(`[LOG INSCRIPCION-SERVICE] Toggle Taller ID ${e}, estado: ${o}`),this.talleresDisponibles.update(n=>n.map(r=>r.id===e?l(s({},r),{seleccionado:o,horarioSeleccionadoId:o?r.horarioSeleccionadoId:null}):r))}setHorario(e,o){console.log(`[LOG INSCRIPCION-SERVICE] Set Horario para Taller ID ${e} a Horario ID: ${o}`),this.talleresDisponibles.update(n=>n.map(r=>r.id===e?l(s({},r),{horarioSeleccionadoId:o}):r))}setDatosPago(e){console.log("[LOG INSCRIPCION-SERVICE] Datos de pago guardados en signal: ",e),this.datosPago.set(e),this.pasoActual.set(3)}setPasos(e){this.pasoActual.set(e)}clearState(){console.log("[LOG INSCRIPCION-SERVICE] Limpiando estado global de inscripci\xF3n."),this.cliente.set(null),this.talleresDisponibles.set([]),this.datosPago.set(null),this.pasoActual.set(1)}inscribirEstudiante(e){return console.log("[LOG INSCRIPCION-SERVICE] POST /nueva con payload: ",e),this.http.post(`${i}/nueva`,e)}obtenerInscripcionesPorCliente(e){return console.log("[LOG INSCRIPCION-SERVICE] GET /cliente/"+e),this.http.get(`${i}/cliente/${e}`)}obtenerAvisos(e){return this.http.get(`${i}/avisos/${e}`)}static \u0275fac=function(o){return new(o||c)};static \u0275prov=p({token:c,factory:c.\u0275fac,providedIn:"root"})};export{u as a};
